{
  "openapi": "3.0.3",
  "info": {
    "description": " [Home](../../) | [Getting started](../getting-started.html) | [Postman](../postman.html) | [Swagger](#/) \n ## Tax Agile API provides a RESTful implementation of the functionality in our web application.\n\n Requres an Account ID and API Key pair for the `POST /v1/auth` endpoint which will return a short-lived JWT Bearer token in the response. \n\n Use the Bearer token in the Authorization header of subsequent requests. \n\n Please [contact us](https://www.vatcalc.com/contact/) if you would like a demo and access. \n\n  ##### Find out more about our products on our website [vatcalc.com](https://www.vatcalc.com/)\n",
    "title": "Tax Agile API Specification",
    "version": "1.4.0",
    "contact": {
      "name": "Tax Agile Support",
      "url": "https://vatcalc.freshdesk.com/support/home"
    },
    "x-logo": {
      "url": "https://github.com/taxagile/developer-hub/blob/main/docs/Tax_Agile_Logo_White_on_Purple_sml.png?raw=true",
      "alText": "Tax Agile logo" 
    }
  },
  "externalDocs": {
    "description": "Latest API Release Notes",
    "url": "https://github.com/taxagile/developer-hub/releases/latest"
  },
  "servers": [
    {
      "url": "https://staging-api.taxagile.io/",
      "description": "Staging API service"
    },
    {
      "url": "https://api.taxagile.io/",
      "description": "Production API service"
    }
  ],
  "paths": {
    "/v1/auth": {
      "post": {
        "tags": [ "Authentication" ],
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "expiresIn": {
                      "example": 86400,
                      "description": "The time in seconds before the token is expired and can no longer be used",
                      "type": "number"
                    },
                    "accessToken": {
                      "description": "Use this token on subsequent API requests in the authorization header with the format 'Bearer <token>'",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50SWQiOiJERU1PIiwiaWF0IjoxNjUzMDU3MjU2LCJleHAiOjE2NTMxNDM2NTZ9.bSMQE3mRHL0LGl9Fpn3rl8wJkvQC7WN9N-U7ikwaavQ",
                      "type": "string"
                    },
                    "tokenType": {
                      "type": "string",
                      "example": "Bearer"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "SV001",
                  "message": "JSON schema validation failed: must NOT have fewer than 1 characters in: accountId"
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          }
        },
        "summary": "Authenticate API Key to receive a Bearer token.",
        "description": "Use API key and accountId to authenticate, and receive a time-based Bearer token which is then used on subsequent requests in the Authorization header.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/authSchemaRequestBody"
              }
            }
          },
          "description": ""
        }
      }
    },
    "/v1/auditor/vat/audits":{
      "post": {
        "tags": [ "VAT Auditor"],
        "summary": "Create a new audit.",
        "description": "## Submit transaction data to VAT Auditor \n Send it as either body JSON, or as an Excel xlsx as multipart form-data, which has been mapped to our data model.\n\nThis endpoint returns with an operation token to use with the `GET /operations/{id}` endpoint to poll for the Audit completion.\n\nIn **v1.3.0** we added the `POST /datamanager/vat/uploads` endpoint which should now be used for sending data to VAT Filer, previously this resource supported that use-case, but that is now _deprecated_. \n\nIn **v1.3.1** we added validation to the json payload that dates are in the format 'YYYY-MM-DD'.",
        "parameters": [],
        "requestBody": { 
          "required": true,
          "description": "The request can be sent as an `application/json` in the request body, or a `multipart/form-data`. \n\n ### application/json \n\n An array of data [ vatDataModelSchema ] transactions, plus an options object which specifies how the system handles the Audit.  When sending Tax Agile data model format JSON, the mappingId should be set to 'default'.\n\n ### multipart/form-data \n\n The form two fields 'file' and 'options'. \n\n - The 'options' field takes a json {} with the Audit options.\n\n - The 'file' field takes a file object which can be either an Excel xlsx file, or an Avalara iVAT Reporting XML file.\n\nIf sending the Avalara XML format you **must** set the Content-Type of the 'file' field to `application/vnd.avalara.ivat.reporting+xml` and the mappingId set to `vnd.avalara.ivat.reporting+xml`.\n\nCheck out the example in the Postman Sample Collection as the multipart/form-data request has it's own Content-Type, as does the 'options' field. \n\n #### Note: Maximum file size 5mb",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/vatUploadRequestBody"
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object", 
                "properties": {
                  "file":{
                    "type": "string",
                    "format": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" 
                  },
                  "options": {
                    "$ref": "#/components/schemas/vatUploadOptions"
                  }
                }
              }
            }
    
          }
        },
        "responses": {
          "202": {
            "description": "Accepted request and an operation ID issued.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/longRunningAccepted202"
                }
              }
            },
            "headers": {
              "Location": {
                "description": "Path to find the polling operation",
                "schema": {
                  "type": "string"
                }
              },
              "Retry-After": {
                "description": "Delay seconds",
                "schema": {
                  "type": "integer"
                }
              }
            }
          },
          "400": {
            "x-summary": "Bad request",
            "description": "Bad request\n| Error code | Message |\n|------|-------------|\n| VA001 | Invalid content-type in request header |\n| VA002 | Mapping id missing from request |\n| VA003 | Data mapping record not found - check mappingId |\n| VA005 | File not uploaded to storage |\n| VA006 | Unhandled error |\n| VA007 | Request body in an unexpected format. Check content-type is set correctly |\n| VA008 | Id is missing from request path |\n| VA011 | Unhandled error |\n| VA014 | Delete not available while still processing data |\n| VA015 | Conflict: File already exists |\n| VA016 | <field> has an invalid data format. Expected format is YYYY-MM-DD |\n| IO001 | File not found or not of a supported type |",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "VA001",
                  "message": "Invalid content-type in request header"
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "500": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "VA006",
                  "message": "_error details_"
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          }
         }
      },
      "get": {
        "tags": [ "VAT Auditor"],
        "summary": "Summary list of audits.",
        "description": "## Lists the (100) most recent audits. \n If there a no items in the list this will return an empty array, on a 200 OK.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json" : {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "type": "string",
                        "example": "FQWaTQN3TXdTD8MGYaXJ"
                      },
                      "entryDateTime": {
                        "type": "string",
                        "example": "2023-03-30T15:13:18.347Z"
                      },
                      "dataSourceName": {
                        "type": "string",
                        "example":"2023-03-30T15:13:17.094Z.json"
                      },
                      "mappingName": {
                        "type": "string",
                        "example":"Tax Agile default json schema"
                      },
                      "dataSource": {
                        "type": "string",
                        "example": "api"
                      },
                      "status": {
                        "type": "string",
                        "example": "Complete"
                      }
                    }
  

                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          }
        }
      }
    },
    "/v1/auditor/vat/audits/{id}":{
      "get": {
        "tags": [ "VAT Auditor"],
        "summary": "Summary of a specific audit.",
        "description": "## Summary of a specific audit. \n The `{id}` for the path parameter is provided by the `GET /operations/{id}` response as the `href` field in the body and also the `location` header. \n\n It is also avaialable from the summary list of audits `GET /auditor/vat/audits` endpoint. \n\n The response body is a summary of the audit including metrics, data summary, datasource information, and includes results href.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of the audit",
            "required": true,
            "example": "9A8FL3X3hr6I0QSLNFAA",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": { 
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/vatAuditSummaryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "VA008",
                  "message": "Audit Id is a mandatory path parameter"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "404": {
            "$ref": "#/components/responses/error404"
          },
          "500": {
            "description": "Unhandled error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "VA010",
                  "message": "Error encountered fetching audit {id}"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [ "VAT Auditor"],
        "summary": "Removes audit results and data from the platform.",
        "description": "## Deletes audit and associated data.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of the specific audit",
            "required": true,
            "example": "9A8FL3X3hr6I0QSLNFAA",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Delete request accepted with no content"           
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "VA008",
                  "message": "Audit Id is a mandatory path parameter"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "404": {
            "$ref": "#/components/responses/error404"
          },
          "500": {
            "description": "Unhandled error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "VA011",
                  "message": "Error encountered deleting audit {id}"
                }
              }
            }
          }
         }
      }
    },
    "/v1/auditor/vat/audits/{id}/results":{
      "get": {
        "tags": [ "VAT Auditor"],
        "summary": "Results of a specific audit.",
        "description": "The `{id}` for the path parameter is provided by the `GET /operations/{id}` response as the `href` field in the body and also the `location` header. \n\n It is also avaialable from the summary list of audits `GET /auditor/vat/audits` endpoint. \n\n The response body is an array of transactions, showing data errors, audit check issues and successful transactions. \n\nTo get a JSON summary of each error in the audit, use the `format=errorList` query parameter _only_ (don't combine with pageSize and startAfter). It returns the first 10,000 errors.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of the audit",
            "required": true,
            "example": "9A8FL3X3hr6I0QSLNFAA",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "State the number of transactions to return in the response.\n\nMaximum value 1000. If not provided defaults to 20.",
            "required": false,
            "schema": {
              "type": "integer"
            },
            "example":"100"
          },
          {
            "name": "startAfter",
            "in": "query",
            "description": "When moving through the results dataset provide the id of the last transaction in the previous page, and the response will 'startAfter' that transaction.\n\nLeave blank to receive the first page of data.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example":"b5e9282e-8a40-4462-81c3-2ab28b904f57"
          },
          {
            "name": "format",
            "in": "query",
            "description": "Use `format=errorList` to get a list of each error. Limited to 10,000 records.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example": "errorList"
          }
        ],
        "responses": { 
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                   "oneOf": [
                    { "$ref": "#/components/schemas/vatAuditResultsResponse" },
                    { "$ref": "#/components/schemas/vatAuditResultsErrorListResponse"}
                   ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "VA008",
                  "message": "Audit Id is a mandatory path parameter"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "404": {
            "$ref": "#/components/responses/error404"
          },
          "500": {
            "description": "Unhandled error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "VA009",
                  "message": "Error encountered fetching audit {id}"
                }
              }
            }
          }
        }
      }
    },
    "/v1/determination/vat/transactions": {
      "post": {
        "summary": "Send a transaction and receive a VAT determination.",
        "description": "Send a transaction to the determination engine for VAT. The request body supports a large number of conditions which may be true on your transaction, but all are not required. It can be helpful to use VAT Advisor to enter a sample transaction to understand the request body you need to send. The transaction can be stored if you include the query parameter commit=true if stored, the response will provide a uuid.",
        "requestBody": {
          "required": true,
          "description": "The payload body requires a JSON object which represents the transaction. If fields are missing, the API will return a response object with context enriched guidance on how to correct the request. Then the caller can resend an updated transaction",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/determinationVatRequestBody"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "commit",
            "description": "Optional, defaults to false; if true the transaction is stored and a unique id is provided in the response.",
            "in": "query",
            "schema": {
              "type": "string",
              "example": "true"
            }
          },
          {
            "name": "useTaxCodes",
            "description": "Optional, defaults to false; if true the engine will check the ERP tax codes setup in our system and return the matching ERP code.",
            "in": "query",
            "schema": {
              "type": "string",
              "example": "true"
            }
          },
          {
            "name": "taxCodeScheme",
            "description": "Optional, if used it specifies which kind of taxCode to return. Must be used with useTaxCodes=true",
            "in": "query",
            "schema": {
              "type": "string",
              "example": "avalara"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/determinationVatResponse200"
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "x-summary": "Bad request",
            "description": "Bad request\n\n| Error code | Message |\n|------|-------------|\n| VD001 | Request body data malformed |\n| VD002 | Unhandled content-type |\n| VD003 | Missing field in data |\n| VD007 | Specified taxCodeScheme is not supported |",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "VD003",
                  "message": "Missing field: date.docDate | Hint: What is the date of the document?"
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          }
        },
        "tags": [ "VAT Calculator" ]
      },
      "get": {
        "summary": "Fetch a collection of transactions with filter params.",
        "description": "Returns a paginated dataset of the committed (saved) transactions stored on the platform. Takes filter criteria as query parameters and sets defaults to ensure a huge dataset is not fetched.  Can be used to collect data periodically to store in your analysis data store; or to build an interactive dashboard in your application.",
        "parameters": [
          {
            "name": "entryDateTimeFrom",
            "in": "query",
            "description": "Datetime stamp in UTC ISO string format from which to select transactions to return. Optional, if not provided it defaults to current date time -30 days.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example":"2022-06-28T00:00:00.000Z"
          },
          {
            "name": "entryDateTimeTo",
            "in": "query",
            "description": "Datetime stamp in UTC ISO string format of the end of the date time range. Optional, no default if not provided.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example":"2022-06-28T23:59:59.999Z"
          },
          {
            "name": "page",
            "in": "query",
            "description": "The page number of the result set you want to fetch. Optional, defaults to 1.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example":"1"
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "The number of transactions to return in a page of results. Optional, defaults to 20.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example":"20"
          },
          {
            "name": "docNumber",
            "in": "query",
            "description": "Filter result set by matching a document number provided on the original request.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example":"12345678"
          },
          {
            "name": "vatCode",
            "in": "query",
            "description": "Filter result set by matching a VAT code from the VAT determination made by our engine.",
            "required": false,
            "schema": {
              "type": "string"
            },
            "example":"BESICSG000"
          }],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "format": "int32",
                      "example": 25
                    },
                    "next": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "format": "int32",
                          "example": 3
                        },
                        "pageSize": {
                          "type": "integer",
                          "format": "int32",
                          "example": 20
                        },
                        "href": {
                          "type": "string",
                          "example": "/v1/determination/vat/transactions?entryDateTimeFrom=2022-06-28T15%3A18%3A28.823Z&page=3&pageSize=20"
                        }
                      }
                    },
                    "previous": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "format": "int32",
                          "example": 1
                        },
                        "pageSize": {
                          "type": "integer",
                          "format": "int32",
                          "example": 20
                        },
                        "href": {
                          "type": "string",
                          "example": "/v1/determination/vat/transactions?entryDateTimeFrom=2022-06-28T15%3A18%3A28.823Z&page=1&pageSize=20"
                        }
                      }
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "request": {
                            "$ref": "#/components/schemas/determinationVatRequestBody"
                          },
                          "response": {
                            "$ref": "#/components/schemas/determinationVatResponse200"
                          },
                          "entryDateTime": {
                            "description": "Datetime the transaction was created on our platform",
                            "type": "string",
                            "example": "2022-06-28T14:12:35.000Z"
                          },
                          "_id": {
                            "description": "Unique id issued by our platform for this transaction",
                            "type": "string",
                            "example": "7942cf02-2067-4b37-8e00-e3bd3926d6e5"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          }
        },
        "tags": [ "VAT Calculator" ]
      }
    },
    "/v1/determination/vat/transactions/{id}": {
      "get": {
        "summary": "Return a specific transaction by id.",
        "description": "Providing the id of the transaction will fetch the transaction from the Tax Agile platform; by default it returns a summary of the payload sent in, and our response back. \n\n Using the `?detail=true` query parameter returns a detail representation of the transaction and how it was processed by our engine.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json":{
                "schema": {
                  "oneOf": [
                    {"$ref": "#/components/schemas/summaryTransactionResponse"},
                    {"$ref": "#/components/schemas/detailTransactionResponse"}
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "QY001",
                  "message": "Document 7942cf02-2067-4b37-8e00-e3bd3926d6e5 not found"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Uuid of the transaction",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "f17b19f2-391c-46b4-9857-025cb0d64a51"
          },
          {
            "name": "detail",
            "in": "query",
            "description": "Optional parameter to fetch a detailed representation of the transaction; if not used it defaults to a summary",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "example": true
          }
        ],
        "tags":[ "VAT Calculator" ]
      }
    },
    "/v1/datamanager/vat/uploads": {
      "post": {
        "tags": ["VAT Data manager"],
        "summary": "Create an upload of data with data pipeline options.",
        "description": "Send data in either json or multi-part form data. \n\n Providing options which link the upload to pipeline options like enrichment and sending to Filer or Auditor. \n\nIn **v1.3.1** we added validation to the json payload that dates are in the format 'YYYY-MM-DD'. \n\nIn **v1.3.3** we added the ability to send JSON and use a data mapping to transform incomplete JSON into our Tax Agile JSON format.",
        "requestBody": {
          "required": true,
          "description": "The request can be sent as an `application/json` in the ***request body***, or a `multipart/form-data` file. \n\n ### application/json \n\n The request body must be an object, containing a data and options object `{ data: [], options {}}`. The data array can be in ***vatDataModelSchema*** or a bespoke format and use a data mapping to transform the body. The options object specifies the data pipeline, stating if the data is sent to Filer and/or Auditor and the data mapping id to use.  When sending Tax Agile data model format JSON, the mappingId should be set to `default`.\n\n ### multipart/form-data \n\n The form has ***two fields*** `file` and `options`. \n\n - The 'options' field takes a json {} with the pipeline options.\n\n - The 'file' field takes a file object which can be either an Excel xlsx file, or an Avalara iVAT Reporting XML file.\n\nIf sending the Avalara XML format you **must** set the ***Content-Type** of the file field to `application/vnd.avalara.ivat.reporting+xml` and the mappingId set to `vnd.avalara.ivat.reporting+xml`.\n\nCheck out the example in the Postman Sample Collection as the multipart/form-data request has it's own Content-Type, as does the 'options' field. \n\n #### Note: Maximum file size 5mb",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/vatUploadRequestBody"
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object", 
                "properties": {
                  "file":{
                    "type": "string",
                    "format": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" 
                  },
                  "options": {
                    "$ref": "#/components/schemas/vatUploadOptions"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Accepted request and an operation ID issued.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/longRunningAccepted202"
                }
              }
            },
            "headers": {
              "Location": {
                "description": "Path to find the polling operation",
                "schema": {
                  "type": "string"
                }
              },
              "Retry-After": {
                "description": "Delay seconds",
                "schema": {
                  "type": "integer"
                }
              }
            }
          },
          "400": {
            "x-summary": "Bad request",
            "description": "Bad request\n\n| Error code | Message |\n|------|-------------|\n| DMV001 | Invalid content-type in request header |\n| DMV002 | Mapping id missing from request |\n| DMV003 | Data mapping record not found - check mappingId |\n| DMV004 | Request data not validated. If sending JSON - check you are sending an array called data: `{ data: [], options: {} }` |\n| DMV005 | File not uploaded to storage |\n| DMV006 | Unhandled error |\n| DMV007 | Request body in an unexpected format. Check content-type is set correctly |\n| DMV011 | Unhandled error |\n| DMV014 | Delete not available while still processing data |\n| DMV016 | <field> has an invalid data format. Expected format is YYYY-MM-DD |\n| DMV018 | Invalid field name: <field> expected 'file' |\n| DMV019 | File type not of supported type |\n| DMV020 | File content validation failed - content does not match claimed file type |\n| DMV021 | File type validation error |\n| DMV022 | No file was provided on request |\n| DMV023 | Error processing multipart form data |\n| IO001 | File not found or not of a supported type |",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "DMV001",
                  "message": "Invalid content-type in request header"
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "409": {
            "description": "Conflict - file of the same name exists",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "DMV015",
                  "message": ""
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "DMV011",
                  "message": "_error details_"
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          }
        }
      }, 
      "get": {
        "tags": ["VAT Data manager"],
        "summary": "Summary list of the most recent 100 uploads.",
        "description": "Summary list of the most recent 100 uploads.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/vatUploadSummaryListResponse"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          }
        }
      }
    },
    "/v1/datamanager/vat/uploads/{id}": {
      "get": {
        "tags": ["VAT Data manager"],
        "summary": "Returns the specific upload record.",
        "description": "",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of the upload",
            "required": true,
            "example": "4e9a3622-c743-46e7-8bb0-f4fa51795164",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/vatUploadsDetailResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "404": {
            "$ref": "#/components/responses/error404"
          },
          "500": {
            "description": "Unhandled error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "DMV009",
                  "message": "Error encountered fetching upload {id}"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["VAT Data manager"],
        "summary": "Deletes the upload including the data created by the upload pipeline.",
        "description": "This endpoint deletes the upload resource, and the associated data created during the upload. \n\n If sendToFiler was used when loading the data, then deleting the upload, removes the data from the returns in VAT Filer. ",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of the upload",
            "required": true,
            "example": "4e9a3622-c743-46e7-8bb0-f4fa51795164",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Delete completed with no content"
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "DMV008",
                  "message": "Id is a mandatory path parameter"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "404": {
            "$ref": "#/components/responses/error404"
          },
          "500": {
            "description": "Unhandled error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "DMV006",
                  "message": "Error encountered deleting upload {id}"
                }
              }
            }
          }
        }

      } 
    },
    "/v1/operations/{id}": {
      "get": {
        "tags": [ "Operations"],
        "summary": "Status of a long-running operation.",
        "description": "## Returns details of a long-running operation. \n\n Use this endpoint to poll for completion of an operation. When the operation completes this endpoint returns a new location header and href in body of the new resource on a `302 See Other` status.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Uuid of the specific operation",
            "required": true,
            "example": "e7c54568-6a4a-4e73-a176-dc59d0ec5604",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK - Operation incomplete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/operationsResponse200"
                }
              }
            },
            "headers": {
              "Location": {
                "description": "Refers to this endpoint when incomplete status",
                "schema": {
                  "type": "string"
                }
              },
              "Retry-After": {
                "description": "Delay seconds",
                "schema": {
                  "type": "integer"
                }
              }
            }
        
          },
          "303": {
            "description": "See Other - Operation complete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/operationsResponse303"
                }
              }
            },
            "headers": {
              "Location": {
                "description": "Path to find new resource",
                "schema": {
                  "type": "string"
                }
              },
              "Retry-After": {
                "description": "Delay seconds",
                "schema": {
                  "type": "integer"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "OP001",
                  "message": "Operation Id is a mandatory path parameter"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "404": {
            "$ref": "#/components/responses/error404"
          },
          "500": {
            "description": "Unexpected error",
            "content": {
              "application/json": {
                "example": {
                  "errorCode": "OP003",
                  "message": "Error encountered fetching operation ${operationId}"
                },
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v1/companies": {
      "post": {
        "tags": ["Companies"],
        "summary": "Create company",
        "description": "Creates a new company from a JSON request body, returning a unique company internal ID.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/companyCreateRequestBody"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Company created successfully",
            "headers": {
              "Location": {
                "description": "URI of the created company.",
                "schema": {
                  "type": "string",
                  "example": "/v1/companies/232e67cf-ff4c-41a2-a472-93a58b373ad4"
                }
              },
              "Retry-After": {
                "description": "Seconds to wait before retry.",
                "schema": {
                  "type": "integer",
                  "example": 1
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "_id": {
                      "type": "string",
                      "description": "Unique internal ID of the created company. \n\nUsed in other API requests referencing `company/:id` as part of a resource path or query.",
                      "example": "232e67cf-ff4c-41a2-a472-93a58b373ad4"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "x-summary": "Bad request",
            "description": "Bad request - Invalid input\n\n| Error code | Message |\n|------|-------------|\n| COM005 | Invalid content-type |\n| COM007 | Invalid company in request |",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM002",
                  "message": "Not allowed"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM001",
                  "message": "Internal error details"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Companies"],
        "summary": "Get companies paginated list",
        "description": "Retrieves a paginated list of companies with optional filtering",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "string",
              "default": "1"
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "string",
              "default": "10"
            }
          },
          {
            "name": "companyCode",
            "in": "query",
            "description": "Filter by exact company code match",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "companyCodeIncludes",
            "in": "query",
            "description": "Filter by company code using trigram search",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "name",
            "in": "query",
            "description": "Filter by exact company name match",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "nameIncludes",
            "in": "query",
            "description": "Filter by company name using trigram search",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "establishedInCountryCode",
            "in": "query",
            "description": "Filter by country where company is established (ISO 3166-1 alpha-2)",
            "schema": {
              "type": "string",
              "minLength": 2,
              "maxLength": 2,
              "example": "BE"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of companies",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/getCompaniesResponse200"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM001",
                  "message": "Internal error details"
                }
              }
            }
          }
        }
      }
    },
    "/v1/companies/{id}": {
      "get": {
        "tags": ["Companies"],
        "summary": "Get company by id",
        "description": "TODO wrong schema - Retrieves a single company by its UUID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Company UUID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Company details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/companyUpdateSchema"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - Missing ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM004",
                  "message": "Id is missing from request path"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "404": {
            "$ref": "#/components/responses/error404"
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM001",
                  "message": "Internal error details"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Companies"],
        "summary": "Update a company",
        "description": "Updates an existing company with idempotent PUT (must send full new version of object).",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Company UUID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/companyUpdateSchema"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Company updated successfully"
          },
          "400": {
            "x-summary": "Bad request",
            "description": "Bad request - Invalid input\n\n| Error code | Message |\n|------|-------------|\n| COM004 | Id is missing from request path |\n| COM005 | Invalid content-type |\n| COM007 | Invalid company in request |",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM002",
                  "message": "Not allowed"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM001",
                  "message": "Internal error details"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Companies"],
        "summary": "Delete company by id",
        "description": "Deletes a company by its UUID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Company UUID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Company deleted successfully"
          },
          "400": {
            "description": "Bad request - Missing ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM004",
                  "message": "Id is missing from request path"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "403": {
            "description": "Forbidden - Insufficient permissions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM002",
                  "message": "Not allowed"
                }
              }
            }
          },
          "404": {
            "description": "Company not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM003",
                  "message": "Company with id 123e4567-e89b-12d3-a456-426614174000 not found"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM001",
                  "message": "Internal error details"
                }
              }
            }
          }
        }
      }
    },
    "/v1/companies/import": {
      "post": {
        "tags": ["Companies"],
        "summary": "Import array of companies",
        "description": "Imports multiple companies at once. Optionally deletes existing companies first.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["data"],
                "properties": {
                  "data": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/companyCreateRequestBody"
                    },
                    "minItems": 1
                  },
                  "options": {
                    "type": "object",
                    "properties": {
                      "deleteExisting": {
                        "type": "boolean",
                        "description": "If true, deletes all existing companies before importing"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Companies imported",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": {
                        "type": "string",
                        "description": "UUID of created company, null if creation failed"
                      },
                      "name": {
                        "type": "string",
                        "description": "Company name"
                      },
                      "status": {
                        "type": "string",
                        "description": "Status of import for this company"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "x-summary": "Bad request",
            "description": "Bad request - Invalid input\n\n| Error code | Message |\n|------|-------------|\n| COM005 | Invalid content-type |\n| COM006 | Invalid data in request |",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/error401"
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse"
                },
                "example": {
                  "errorCode": "COM001",
                  "message": "Internal error details"
                }
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "Use API key to fetch a short-lived session JWT."
    },
    {
      "name": "Companies",
      "description": "Endpoints supporting create, list, update or delete operations on the companies resource."
    },
    {
      "name": "Operations",
      "description": "Long running operation queues."
    },
    {
      "name": "VAT Auditor",
      "description": "Complete an Audit of VAT compliance on your data."
    },
    {
      "name": "VAT Calculator",
      "description": "Use our engine to do VAT determination on transactions."
    },
    {
      "name": "VAT Data manager",
      "description": "VAT Data manager for uploads - includes details of the data pipeline options selected. "
    }
  ],
  "x-tagGroups": [
    {
      "name": "Products",
      "tags": ["VAT Auditor", "VAT Calculator"]
    },
    {
      "name": "Config",
      "tags": ["Authentication", "Operations"]
    },
    {
      "name": "Master data",
      "tags": ["Companies"]
    }
  ],
  "security": [
    {
      "BearerAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer"
      }
    },
    "schemas": {
      "errorResponse": {
        "description": "Standardised error response returned with a code and message",
        "title": "Error",
        "type": "object",
        "properties": {
          "errorCode": {
            "type": "string",
            "example": "<error code>"
          },
          "message": {
            "example": "<error message>",
            "type": "string"
          }
        },
        "example": { 
          "errorCode": "XX123", 
          "message": "This type not allowed" 
        }
      },
      "vatDataModelSchema": {
        "title":"VAT Data Model",
        "type":"object",
        "properties": 
        {
          "transactionDetail": {
            "type": "object",
            "properties": {
              "importedUnderDefermentScheme": {
                "type": "boolean",
                "example": true,
                "description": "Are the goods imported under an import VAT deferment scheme?"
              },
              "chainTransactionInvoice2": {
                "type": "boolean",
                "example": true,
                "description": "Second invoice on chain transaction?"
              },
              "isCustomsProcedureRemoval": {
                "type": "boolean",
                "example": true,
                "description": "Are goods removed from a customs procedure?"
              },
              "relevantContractsTax": {
                "type": "boolean",
                "example": true,
                "description": "Under Relevant Contracts Tax / CIS?"
              },
              "optedToTax": {
                "type": "boolean",
                "example": true,
                "description": "Has the supplier opted to tax?"
              },
              "statisticalProcedure": {
                "type": "number",
                "description": "Statistical procedure for intrastat"
              },
              "isForProvisioningOfAirline": {
                "type": "boolean",
                "example": true,
                "description": "For the provisioning of an airline?"
              },
              "ExciseDutySuspensionRelease": {
                "type": "boolean",
                "example": true,
                "description": "Are goods being released from excise duty suspension?"
              },
              "taxCode": {
                "type": "string",
                "description": "Tax code from the source system"
              },
              "isTemporaryStorage": {
                "type": "boolean",
                "example": true,
                "description": "Goods placed under temporary storage?"
              },
              "storedInDesignatedArea": {
                "type": "boolean",
                "example": true,
                "description": "Stored in designated area?"
              },
              "isCustomsWarehouse": {
                "type": "boolean",
                "example": true,
                "description": "Goods placed in customs warehouse?"
              },
              "isDonatedItem": {
                "type": "boolean",
                "example": true,
                "description": "Is/Was the item donated to the charity?"
              },
              "underExciseDutySuspension": {
                "type": "boolean",
                "example": true,
                "description": "Goods under excise duty suspension?"
              },
              "isCustomsProcedure": {
                "type": "boolean",
                "example": true,
                "description": "Goods placed under customs procedure?"
              },
              "isExciseWarehouse": {
                "type": "boolean",
                "example": true,
                "description": "Excise warehouse regime?"
              },
              "taxCodeDescription": {
                "type": "string",
                "description": ""
              },
              "cashAccounting": {
                "type": "boolean",
                "example": true,
                "description": "Using cash accounting?"
              },
              "isInwardProcessing": {
                "type": "boolean",
                "example": true,
                "description": "Goods placed under inward processing?"
              },
              "isForProvisioningOfVessel": {
                "type": "boolean",
                "example": true,
                "description": "For the provisioning of a vessel?"
              },
              "customsDutyAndLevyAmount": {
                "type": "number",
                "description": "Other duties taxes and levies on import"
              },
              "soldOnMarketplace": {
                "type": "boolean",
                "example": true,
                "description": "Sold on a marketplace?"
              },
              "intrastatVatScheme": {
                "type": "string",
                "enum": [
                  "10",
                  "11",
                  "19",
                  "20",
                  "10",
                  "21",
                  "25",
                  "26",
                  "29",
                  "31"
                ],
                "description": "VAT scheme for intrastat"
              },
              "linkedToExport": {
                "type": "boolean",
                "example": true,
                "description": "is the transaction related to an export?"
              },
              "warehouseFiscalRepresentative": {
                "type": "boolean",
                "example": true,
                "description": "Appointed local fiscal representative?"
              },
              "insuranceAmount": {
                "type": "number",
                "description": "Insurance amount"
              },
              "businessUsage": {
                "type": "number",
                "description": "Percentage business use?"
              },
              "customsClearanceReference": {
                "type": "string",
                "description": ""
              },
              "splitPayment": {
                "type": "boolean",
                "example": true,
                "description": "Split payment?"
              },
              "isFreeZone": {
                "type": "boolean",
                "example": true,
                "description": "Goods placed in free zone?"
              },
              "durationOfHire": {
                "type": "number",
                "description": "Duration of hire (days)?"
              },
              "callOffStock": {
                "type": "boolean",
                "example": true,
                "description": "Are the goods supplied under a call-off stock arrangement?"
              },
              "isBusinessEntertainment": {
                "type": "boolean",
                "example": true,
                "description": "For business entertainment"
              },
              "isVatWarehouseRemoval": {
                "type": "boolean",
                "example": true,
                "description": "Are the goods removed from a VAT warehouse?"
              },
              "natureOfTransaction": {
                "type": "number",
                "description": "Nature of transaction (intrastat)"
              },
              "reportingCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": ""
              },
              "chainTransactionInvoice1": {
                "type": "boolean",
                "example": true,
                "description": "First invoice on chain transaction?"
              },
              "optedNotToTax": {
                "type": "boolean",
                "example": true,
                "description": "Has the supplier opted not to tax?"
              },
              "isVatWarehouse": {
                "type": "boolean",
                "example": true,
                "description": "VAT warehouse regime?"
              },
              "isSuccessiveSupply": {
                "type": "boolean",
                "example": true,
                "description": "Part of a successive (chain) supply?"
              },
              "betweenContractors": {
                "type": "boolean",
                "example": true,
                "description": "Transaction between two contractors?"
              },
              "shippingAndHandlingAmount": {
                "type": "number",
                "description": "Shipping and handling amount"
              },
              "isExternalTransit": {
                "type": "boolean",
                "example": true,
                "description": "Goods under external transit (T1) procedure?"
              }
            }
          },
          "transportTerms": {
            "type": "object",
            "properties": {
              "transport": {
                "type": "string",
                "enum": [
                  "Seller",
                  "Buyer",
                  "Third-party on behalf of seller",
                  "Third-party on behalf of buyer",
                  "None",
                  "Use incoterm"
                ],
                "description": "Which party takes care of the transport?"
              },
              "modeOfTransport": {
                "type": "number",
                "description": "Mode of transport (intrastat)"
              },
              "importerOfRecord": {
                "type": "string",
                "enum": [
                  "Seller",
                  "Buyer"
                ],
                "description": "Which party is the importer?"
              },
              "consignmentValue": {
                "type": "number",
                "description": "Value of the consignment?"
              },
              "incoterm": {
                "type": "string",
                "enum": [
                  "DDP",
                  "DPU",
                  "DAP",
                  "DDU",
                  "CFR",
                  "CIF",
                  "CPT",
                  "CIP",
                  "FOB",
                  "FAS",
                  "FCA",
                  "FPC",
                  "EXW"
                ],
                "description": "Incoterm"
              }
            }
          },
          "landAndPropertyDetail": {
            "type": "object",
            "properties": {
              "isNewBuild": {
                "type": "boolean",
                "example": true,
                "description": "Is the property a new build?"
              },
              "firstGrant": {
                "type": "boolean",
                "example": true,
                "description": "Is it the first grant of a major interest?"
              },
              "isConversion": {
                "type": "boolean",
                "example": true,
                "description": "Is this a conversion?"
              },
              "substantialReconstruction": {
                "type": "boolean",
                "example": true,
                "description": "Has the property undergone substantial reconstruction?"
              },
              "conversionType": {
                "type": "string",
                "enum": [
                  "Non-residential to residential",
                  "Residential conversion (house to flat, 1 flat to 2 flats, etc)",
                  "Other"
                ],
                "description": "Type of conversion"
              },
              "leaseholdLength": {
                "type": "number",
                "description": "How long is the leasehold?"
              },
              "certficateOfUsage": {
                "type": "boolean",
                "example": true,
                "description": "Is there a certificate to confirm the property is for relevant residential or relevant charitable? "
              },
              "suppliedAsPartOfConstructionService": {
                "type": "boolean",
                "example": true,
                "description": "Have the materials been supplied as part of a construction service?"
              },
              "typeOfBuilding": {
                "type": "string",
                "enum": [
                  "Dwelling",
                  "Relevant residential",
                  "Relevant charitable",
                  "Protected building",
                  "Commercial",
                  "Other"
                ],
                "description": "What is the type of building"
              },
              "freehold": {
                "type": "boolean",
                "example": true,
                "description": "Is it a freehold?"
              }
            }
          },
          "locations": {
            "type": "object",
            "properties": {
              "shipToCounty": {
                "type": "string",
                "description": "Ship to county"
              },
              "departureCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of departure?"
              },
              "shipFrom": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Ship from"
              },
              "placeOfGoods": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the place of the goods?"
              },
              "placeOfService": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Where was the service carried out?"
              },
              "shipToPostcode": {
                "type": "string",
                "description": "Ship to postcode"
              },
              "regionShipFrom": {
                "type": "string",
                "description": "Region that the goods are shipped from"
              },
              "shipToAddress1": {
                "type": "string",
                "description": ""
              },
              "shipFromCity": {
                "type": "string",
                "description": "Ship from city"
              },
              "shipFromAddress2": {
                "type": "string",
                "description": "Ship from address 2"
              },
              "shipToAddress3": {
                "type": "string",
                "description": "Ship to address line 3"
              },
              "shipToCity": {
                "type": "string",
                "description": "Ship to city"
              },
              "regionShipTo": {
                "type": "string",
                "description": ""
              },
              "shipFromAddress3": {
                "type": "string",
                "description": "Ship from address line 3"
              },
              "shipTo": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Ship to"
              },
              "shipToAddress2": {
                "type": "string",
                "description": "Ship to address 2"
              },
              "shipFromAddress1": {
                "type": "string",
                "description": "Ship from address 1"
              },
              "arrivalCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of arrival?"
              },
              "countryImport": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of importation?"
              },
              "shipFromCounty": {
                "type": "string",
                "description": "Ship from country"
              },
              "shipFromPostcode": {
                "type": "string",
                "description": "Ship from postcode"
              }
            }
          },
          "vehicleDetail": {
            "type": "object",
            "properties": {
              "kilometresTravelled": {
                "type": "number",
                "description": "How many kilometres has the vehicles travelled?"
              },
              "numberOfSeats": {
                "type": "number",
                "description": "How many seats in the vehicle"
              },
              "cubicCapacity": {
                "type": "number",
                "description": "What is the cubic capacity?"
              },
              "length": {
                "type": "number",
                "description": "What is the length of the vessel?"
              },
              "power": {
                "type": "number",
                "description": "What is the vehicle power?"
              },
              "age": {
                "type": "number",
                "description": "How old is the vehicle?"
              }
            }
          },
          "documentPayment": {
            "type": "object",
            "properties": {
              "paymentTerms": {
                "type": "string",
                "description": "A textual description of the payment terms that apply to the amount due for payment (Including description of possible penalties). In case the Amount due for payment (BT-115) is positive, either the Payment due date (BT-9) or the Payment terms (BT-20) shall be present."
              },
              "paymentMeansCode": {
                "type": "string",
                "enum": [
                  "1",
                  "2",
                  "3",
                  "4",
                  "5",
                  "6",
                  "7",
                  "8",
                  "9",
                  "10",
                  "11",
                  "12",
                  "13",
                  "14",
                  "16",
                  "17",
                  "18",
                  "19",
                  "20",
                  "21",
                  "22",
                  "23",
                  "24",
                  "25",
                  "26",
                  "27",
                  "28",
                  "29",
                  "30",
                  "31",
                  "32",
                  "33",
                  "34",
                  "35",
                  "36",
                  "37",
                  "38",
                  "39",
                  "40",
                  "41",
                  "42",
                  "43",
                  "44",
                  "45",
                  "46",
                  "47",
                  "48",
                  "49",
                  "50",
                  "51",
                  "52",
                  "53",
                  "54",
                  "55",
                  "56",
                  "57",
                  "58",
                  "59",
                  "60",
                  "61",
                  "62",
                  "63",
                  "64",
                  "65",
                  "66",
                  "67",
                  "68",
                  "69",
                  "70",
                  "74",
                  "75",
                  "76",
                  "77",
                  "78",
                  "91",
                  "92",
                  "93",
                  "94",
                  "95",
                  "96",
                  "97",
                  "98",
                  "ZZZ"
                ],
                "description": "The means, expressed as code, for how a payment is expected to be or has been settled."
              },
              "payeeFinancialAccountName": {
                "type": "string",
                "description": "The name of the payment account, at a payment service provider, to which payment should be made."
              },
              "payeeFinancialInstitutionBranchId": {
                "type": "string",
                "description": "An identifier for the payment service provider where a payment account is located. Such as a BIC or a national clearing code where required. No identification scheme Identifier to be used."
              },
              "paymentId": {
                "type": "string",
                "description": "A textual value used to establish a link between the payment and the Invoice, issued by the Seller. Used for creditor's critical reconciliation information. This information element helps the Seller to assign an incoming payment to the relevant payment process."
              },
              "payeeFinancialAccountId": {
                "type": "string",
                "description": "A unique identifier of the financial payment account, at a payment service provider, to which payment should be made. Such as IBAN or BBAN."
              }
            }
          },
          "item": {
            "type": "object",
            "properties": {
              "unit": {
                "type": "string",
                "enum": [
                  "Litre",
                  "Kilogram",
                  "Cubic metre",
                  "MVh",
                  "Megawatt-hour",
                  "Imperial gallon",
                  "kg"
                ],
                "description": "What is the item unit?"
              },
              "totalAmountCurrency4": {
                "type": "number",
                "description": ""
              },
              "vatAmountToCheckCurrency4": {
                "type": "number",
                "description": ""
              },
              "tariffCode": {
                "type": "string",
                "description": "What is the tariff code?"
              },
              "vatAmountToCheckCurrency2": {
                "type": "number",
                "description": ""
              },
              "originalValue": {
                "type": "number",
                "description": "Tax base on the original invoice"
              },
              "supplementaryUnits": {
                "type": "number",
                "description": "Supplementary units for intrastat"
              },
              "description": {
                "type": "string",
                "description": "Item description"
              },
              "vatRateToCheck": {
                "type": "number",
                "description": "What is the VAT rate to be checked by Auditor?"
              },
              "reversedVatAmountToCheck": {
                "type": "number",
                "description": ""
              },
              "rateCategory": {
                "type": "string",
                "description": "What is the VAT rate category?"
              },
              "reversedVatAmountToCheckCurrency3": {
                "type": "number",
                "description": ""
              },
              "reversedVatAmountToCheckCurrency4": {
                "type": "number",
                "description": ""
              },
              "itemType": {
                "type": "string",
                "enum": [
                  "Accommodation for business associates",
                  "Accommodation for employees",
                  "Accountancy service",
                  "Activities carried out by television and radio bodies (non-commercial)",
                  "Admission to a cinema",
                  "Admission to a circus",
                  "Admission to a concert or theatre",
                  "Admission to a sporting event",
                  "Admission to amusement parks",
                  "Admission to events",
                  "Advertising services",
                  "Aircraft",
                  "Air freight",
                  "Alcohol (other)",
                  "Aluminium",
                  "Animal foodstuffs",
                  "Antiques",
                  "Architecture services",
                  "Baby food and processed food stuff",
                  "Banking",
                  "Bedding plants, seeds, fertilizers and other agrochemical products",
                  "Beer",
                  "Betting",
                  "Beverages (non-alcoholic)",
                  "Books",
                  "Books (educational only)",
                  "Bread",
                  "Broadcasting services",
                  "Building materials",
                  "Bus",
                  "Car",
                  "Cattle food",
                  "Cereals",
                  "Chemicals",
                  "Children's car seats",
                  "Children's clothing",
                  "Clothing",
                  "CO2 emission rights",
                  "Coal and coke",
                  "Cocoa beans, whole or broken, raw or roasted",
                  "Coconuts, Brazil nuts and cashew nuts",
                  "Coffee, not roasted",
                  "Collectors' items",
                  "Computers and peripheral equipment",
                  "Construction of social dwellings",
                  "Construction work, including repair, cleaning, maintenance, demolition",
                  "Construction, errection or housing used on a permanent residence",
                  "Consultancy service",
                  "Copper",
                  "Courier service",
                  "Cultural, sporting and exhibition services",
                  "Data processing",
                  "Demolition and rebuilding of houses in major cities",
                  "Dental services",
                  "Development and sale of non-standard Software",
                  "Diesel",
                  "Digital service",
                  "Digital newspaper",
                  "Disbursement",
                  "eBook",
                  "Edible oils",
                  "Education",
                  "Electricity",
                  "Electronically supplied services",
                  "Estate agency services",
                  "Extended warranty",
                  "Financial services that aren't exempt",
                  "Firewood (logs, billets, woodchips, brushwood etc)",
                  "Food and beverage (non-alcoholic)",
                  "Footwear",
                  "Fuel",
                  "Gas and electricity certificates",
                  "Gas oil",
                  "Gas through a natural gas system",
                  "Geological materials",
                  "Goods for the equipping, fuelling and provisioning of pleasure boats and private aircraft or any other means of transport for private use",
                  "Goods supplied on board train, vessel or aircraft",
                  "Goods supplied with installation",
                  "GP services",
                  "Grains and oil seeds (including soya beans) and oleaginous fruits",
                  "Hairdressing services",
                  "Haulage services",
                  "Heating or cooling energy through networks",
                  "Heavy fuel oil (HFO)",
                  "Hire of a motor vehicle",
                  "Hire of a bicycle",
                  "Hire of a trailer",
                  "Hire of a semi-trailer",
                  "Hire of a agricultural vehicles",
                  "Hire of a vessel",
                  "Hire of an aircraft",
                  "Hire of goods",
                  "Holiday camp accommodation",
                  "Hospital care",
                  "Hotel accommodation",
                  "Human organs, blood and milk",
                  "Husked rice",
                  "Hydrogen",
                  "Indemnity",
                  "Insolvency practitioner service",
                  "Installation services (becomes part of an immovable property)",
                  "Installation services (does not become part of an immovable property)",
                  "Insurance",
                  "Integrated circuit devices or computer chips",
                  "Investment gold",
                  "Kerosene",
                  "Land",
                  "Lawyer's service",
                  "Lead",
                  "Petrol (leaded)",
                  "Leasing of a building",
                  "Letting of a building",
                  "Letting agency services",
                  "Livestock",
                  "Liquid petroleum gas (LPG)",
                  "Lorry",
                  "Lotteries",
                  "Lubricant",
                  "Machinery",
                  "Magazines",
                  "Marketing",
                  "Manufactured goods",
                  "Media streaming",
                  "Medical equipment",
                  "Medication",
                  "Metals",
                  "Milk",
                  "Mineral oils (including propane and butane; also including crude petroleum oils)",
                  "Miscellaneous goods",
                  "Miscellaneous goods (middle rate)",
                  "Miscellaneous goods (reduced rate)",
                  "Miscellaneous goods (lower rate)",
                  "Miscellaneous goods (super-reduced rate)",
                  "Miscellaneous goods (zero rate)",
                  "Miscellaneous service",
                  "Miscellaneous service (middle rate)",
                  "Miscellaneous service (reduced rate)",
                  "Miscellaneous service (lower rate)",
                  "Miscellaneous service (super-reduced rate)",
                  "Miscellaneous service (zero rate)",
                  "Mobile phone",
                  "Modification, repair or maintenance of a vessel",
                  "Modification, repair or maintenance of an aircraft",
                  "Motorbike",
                  "Movable, tangible property",
                  "Natural gas",
                  "Newspaper or periodical publishing service",
                  "Newspapers",
                  "Non-fungible token",
                  "Nickel",
                  "Old, used, scrap materials",
                  "Olives",
                  "Organising of events",
                  "Other event services",
                  "Other goods",
                  "Other nuts",
                  "Other services",
                  "Payment Services",
                  "Periodicals",
                  "Petroleum",
                  "Pharmaceutical products",
                  "Photographs and other printed matter",
                  "Platinum (palladium, rhodium)",
                  "Postal services",
                  "Potatoes",
                  "Private tuition",
                  "Provision of information",
                  "Raw or semi-finished metals (not scrap metals)",
                  "Raw sugar",
                  "Refuelling aircraft",
                  "Refuelling vessels",
                  "Reinsurance",
                  "Renovation and repair of private dwellings",
                  "Renovation of houses over 10 years old",
                  "Repair and maintenance services",
                  "Restaurant and catering services",
                  "Restaurant and catering services on board a ship, aircraft or train",
                  "Rubber, in primary forms or in plates, sheets or strip",
                  "Sea freight",
                  "Services connected to sports competitions and games of chance",
                  "Services linked to sport or physical education by non-profit making orangisations",
                  "Services linked to welfare and social security",
                  "Services of consultants, engineers, consultancy firms, lawyers, accountants and other similar services, as well as data processing and the provision of information",
                  "Services rendered by operators of museums, botanical gardens and zoos",
                  "Services Supplied by Travel Agents",
                  "Services to disabled persons",
                  "Silver",
                  "Small repair services to bicycles, shoes and clothing",
                  "Social care for children",
                  "Social housing",
                  "Spirits (alcohol)",
                  "Stamps",
                  "Storage services",
                  "Supplies for goods or passenger transport",
                  "Supply of services linked to protection of children and young persons",
                  "Supply of a building",
                  "Supply of staff by religious or philosophical institutions for children's education",
                  "Supply of staff by religious or philosophical institutions for hospital and medical care",
                  "Supply of staff by religious or philosophical institutions for the protection of children and young persons",
                  "Supply of staff by religious or philosophical institutions for welfare and social security work",
                  "Takeway food",
                  "Tea",
                  "Telecommunications services",
                  "Textiles",
                  "The granting and negotiation of credit",
                  "The hire of safes",
                  "The hiring out of moveable tangible property (excluding means of transport)",
                  "The Hiring-out of stands for fairs and exhibitions",
                  "The letting of permanently installed equipment and machinery",
                  "The letting of premises and sites for the parking of vehicles",
                  "The management of special investment funds as defined by Member States",
                  "The negotiation of or any dealings in credit guarantees or any other security for money and the management of credit guarantees by the person who is granting the credit",
                  "The provision of access to a natural gas system situated within the territory of the Community or to any network connected to such a system",
                  "The supply of staff",
                  "The supply of staff engaged in construction work",
                  "Tin",
                  "Tobacco",
                  "Toll",
                  "Train",
                  "Training (with admittance)",
                  "Training (privately contracted)",
                  "Training (online)",
                  "Transactions, including negotiation but not management or safekeeping, in shares, interests in companies or associations, debentures and other securities, but excluding documents establishing title to goods, and the rights or securities",
                  "Transactions, including negotiation, concerning currency, bank notes and coins used as legal tender, with the exception of collectors' items",
                  "Transactions, including negotiation, concerning deposit and current accounts, payments, transfers, debts, cheques and other negotiable instruments, but excluding debt collection",
                  "Transfers and assignments of copyrights, patents, licences, trade marks and similar rights",
                  "Transport services for sick or injured people (ambulance)",
                  "Transport services such as loading, handling, unloading",
                  "Transportation of persons by air",
                  "Transportation of persons by land",
                  "Transportation of persons by sea",
                  "Truck",
                  "Petrol (unleaded)",
                  "Urns and coffins",
                  "Use of sporting facilities",
                  "Valuation of movable proprty",
                  "Van",
                  "Vegetable oils and fats and their fractions, whether or not refined, but not chemically modified",
                  "Vessel",
                  "Vetinary services",
                  "Video games, games consoles, laptops, tablets",
                  "Waste collection",
                  "Water (non-branded)",
                  "Wine",
                  "Wool",
                  "Work on movable property",
                  "Works of art",
                  "Writers, composers, etc",
                  "Zinc",
                  "Admission to virtual events",
                  "Electric vehicle charging"
                ],
                "description": "Item"
              },
              "valueCurrency3": {
                "type": "number",
                "description": ""
              },
              "deductibleInputVatCurrency4": {
                "type": "number",
                "description": ""
              },
              "itemID": {
                "type": "string",
                "description": "What is the ID of the item?"
              },
              "valueCurrency4": {
                "type": "number",
                "description": ""
              },
              "originalVatAmountToCheckCurrency3": {
                "type": "number",
                "description": ""
              },
              "userRateCategory": {
                "type": "string",
                "enum": [
                  "Auto",
                  "S",
                  "M",
                  "R",
                  "L",
                  "Z",
                  "P",
                  "K",
                  "A",
                  "B"
                ],
                "description": "User defined rate category"
              },
              "originalValueCurrency3": {
                "type": "number",
                "description": ""
              },
              "deductibleInputVatCurrency3": {
                "type": "number",
                "description": ""
              },
              "reversedVatRateToCheck": {
                "type": "number",
                "description": ""
              },
              "reversedVatAmountToCheckCurrency2": {
                "type": "number",
                "description": ""
              },
              "deductibleInputVatCurrency2": {
                "type": "number",
                "description": ""
              },
              "originalValueCurrency2": {
                "type": "number",
                "description": ""
              },
              "totalAmountCurrency2": {
                "type": "number",
                "description": ""
              },
              "quantity": {
                "type": "number",
                "description": "Quantity"
              },
              "origin": {
                "type": "string",
                "description": "What is the origin of the goods?"
              },
              "originalVatAmountToCheckCurrency4": {
                "type": "number",
                "description": ""
              },
              "totalAmountCurrency3": {
                "type": "number",
                "description": ""
              },
              "originalVatAmountToCheckCurrency2": {
                "type": "number",
                "description": ""
              },
              "originalVatAmountToCheck": {
                "type": "number",
                "description": "Amount of VAT on the original invoice"
              },
              "itemBeingStored": {
                "type": "string",
                "enum": [
                  "Alcohol (other)",
                  "Beer",
                  "Coal and coke",
                  "Diesel",
                  "Electricity",
                  "Fuel",
                  "Gas oil",
                  "Heavy fuel oil (HFO)",
                  "Hydrogen",
                  "Kerosene",
                  "Petrol (leaded)",
                  "Liquid petroleum gas (LPG)",
                  "Lubricant",
                  "Mineral oils (including propane and butane; also including crude petroleum oils)",
                  "Natural gas",
                  "Petroleum",
                  "Spirits (alcohol)",
                  "Tobacco",
                  "Petrol (unleaded)",
                  "Wine",
                  "Potatoes",
                  "Olives",
                  "Coconuts, Brazil nuts and cashew nuts",
                  "Other nuts",
                  "Coffee, not roasted",
                  "Tea",
                  "Cereals",
                  "Husked rice",
                  "Grains and oil seeds (including soya beans) and oleaginous fruits",
                  "Vegetable oils and fats and their fractions, whether or not refined, but not chemically modified",
                  "Raw sugar",
                  "Cocoa beans, whole or broken, raw or roasted",
                  "Chemicals",
                  "Rubber, in primary forms or in plates, sheets or strip",
                  "Wool",
                  "Silver",
                  "Platinum (palladium, rhodium)",
                  "Copper",
                  "Nickel",
                  "Aluminium",
                  "Lead",
                  "Zinc",
                  "Tin",
                  "Other goods"
                ],
                "description": "What item is being stored?"
              },
              "totalAmount": {
                "type": "number",
                "description": "What is the document total?"
              },
              "lineNumber": {
                "type": "number",
                "description": ""
              },
              "measurement": {
                "type": "number",
                "description": "Total of a unit of measurement"
              },
              "vatAmountToCheckCurrency3": {
                "type": "number",
                "description": ""
              },
              "deductibleInputVatRate": {
                "type": "number",
                "description": "Deductible rate?"
              },
              "deductibleInputVat": {
                "type": "number",
                "description": "What amount of the input VAT is deductible?"
              },
              "statisticalValue": {
                "type": "number",
                "description": "Statistical value for intrastat "
              },
              "valueCurrency2": {
                "type": "number",
                "description": ""
              },
              "value": {
                "type": "number",
                "description": "What is the amount of the item?"
              },
              "originalValueCurrency4": {
                "type": "number",
                "description": ""
              },
              "vatAmountToCheck": {
                "type": "number",
                "description": "What is the VAT amount to be checked by Auditor?"
              }
            }
          },
          "seller": {
            "type": "object",
            "properties": {
              "warehouseLicenceNumber": {
                "type": "string",
                "description": "Seller's VAT / excise warehouse licence number"
              },
              "combinationGroupID": {
                "type": "string",
                "description": "What is the name of the combination group this company belongs to?"
              },
              "isRegisteredForToms": {
                "type": "boolean",
                "example": true,
                "description": "Is the seller registered for the Tour Operator Margin Scheme?"
              },
              "incorporationId": {
                "type": "string",
                "description": "Company incorporation Id"
              },
              "isHospital": {
                "type": "boolean",
                "example": true,
                "description": "Is the seller a hospital?"
              },
              "id": {
                "type": "string",
                "description": "What is the supplier's company ID?"
              },
              "registrationThreshold": {
                "type": "boolean",
                "example": true,
                "description": "Exceeded registration threshold?"
              },
              "countryNonUnionOssId": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Country of non-Union OSS Id"
              },
              "postCode": {
                "type": "string",
                "description": "What is the postcode of the ship from address?"
              },
              "exciseNumberCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of the seller's excise ID?"
              },
              "sellerExciseNumber": {
                "type": "string",
                "description": "What is the supplier's excise number?"
              },
              "countrySellerIossId": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of the IOSS Id?"
              },
              "countryUnionOssId": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Country of Union OSS Id"
              },
              "vatIdType": {
                "type": "string",
                "enum": [
                  "Fixed establishment",
                  "Fiscal representative",
                  "Direct",
                  "Main establishment"
                ],
                "description": "What type of VAT registration is it?"
              },
              "name": {
                "type": "string",
                "description": "Name of supplier"
              },
              "type": {
                "type": "string",
                "enum": [
                  "Taxable person",
                  "Non-taxable legal person",
                  "Private person",
                  "European Union body",
                  "Embassy",
                  "International body",
                  "NATO"
                ],
                "description": "What is the seller type?"
              },
              "sellerIossId": {
                "type": "string",
                "description": "What is the seller's IOSS ID?"
              },
              "sellerNonUnionOssId": {
                "type": "string",
                "description": "What is the seller's non-Union OSS ID?"
              },
              "countriesVATRegistration": {
                "type": "string",
                "description": "In which countries does the supplier have a VAT registration?"
              },
              "vatIdCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of the supplier's VAT ID?"
              },
              "isEligibleEducationalBody": {
                "type": "boolean",
                "example": true,
                "description": "Is the supplier an eligible educational body?"
              },
              "isCharity": {
                "type": "boolean",
                "example": true,
                "description": "Is the seller a charity?"
              },
              "establishmentMakingSupply": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Which establishment is making the supply"
              },
              "sellerUnionOssId": {
                "type": "string",
                "description": "What is the seller's Union OSS ID?"
              },
              "registeredConsignor": {
                "type": "boolean",
                "example": true,
                "description": "Is the supplier a registered consignor?"
              },
              "buildingNumber": {
                "type": "number",
                "description": ""
              },
              "county": {
                "type": "string",
                "description": ""
              },
              "_id": {
                "type": "string",
                "description": "Internal Seller ID"
              },
              "isTravelAgent": {
                "type": "boolean",
                "example": true,
                "description": "Is the seller a travel agent?"
              },
              "vatGroupID": {
                "type": "string",
                "description": "What is the name of the VAT Group this company belongs to?"
              },
              "specialSolidarityContribution": {
                "type": "boolean",
                "example": true,
                "description": "Is Special Solidarity Contribution (CSS) applicable?"
              },
              "establishedCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "In which country is the seller established?"
              },
              "euDistanceSellingThreshold": {
                "type": "boolean",
                "example": true,
                "description": "Exceeded EUR 10k in calendar year (Post-July 21)?"
              },
              "sellerVatId": {
                "type": "string",
                "description": "What is the seller's VAT ID?"
              },
              "registeredForDistanceSales": {
                "type": "boolean",
                "example": true,
                "description": "Registered for distance sales in ship to country (Pre-July 21)?"
              },
              "localTaxId": {
                "type": "string",
                "description": ""
              },
              "countriesFixedEstablishment": {
                "type": "string",
                "description": "In which countries does the seller have a fixed establishment?"
              },
              "address": {
                "type": "string",
                "description": ""
              },
              "countriesImportDefermentLicence": {
                "type": "string",
                "description": "In which countries does the seller have a licence for import deferment?"
              },
              "countriesExciseRegistration": {
                "type": "string",
                "description": "In which countries does the supplier have an excise registration?"
              },
              "city": {
                "type": "string",
                "description": ""
              }
            }
          },
          "buyer": {
            "type": "object",
            "properties": {
              "countriesVATRegistration": {
                "type": "string",
                "description": "In which countries does the customer have a VAT registration?"
              },
              "buyerExciseNumber": {
                "type": "string",
                "description": "What is the customer's excise number?"
              },
              "name": {
                "type": "string",
                "description": "Name of customer?"
              },
              "address": {
                "type": "string",
                "description": ""
              },
              "isRegisteredForToms": {
                "type": "boolean",
                "example": true,
                "description": "Is the buyer registered for the Tour Operator Margin Scheme?"
              },
              "postCode": {
                "type": "string",
                "description": "What is the postcode of the ship to address?"
              },
              "buyerVatId": {
                "type": "string",
                "description": "What is the customer's VAT ID?"
              },
              "exciseNumberCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of the supplier's excise number?"
              },
              "isGasElecTaxableDealer": {
                "type": "boolean",
                "example": true,
                "description": "Is the supply to a taxable dealer/trader?"
              },
              "establishedCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "In which country is the buyer established?"
              },
              "_id": {
                "type": "string",
                "description": "Internal Buyer ID"
              },
              "establishmentReceivingSupply": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Which establishment is receiving the supply?"
              },
              "incorporationId": {
                "type": "string",
                "description": "Company incorporation Id"
              },
              "customerOrPrincipal": {
                "type": "string",
                "enum": [
                  "Customer",
                  "Principal"
                ],
                "description": "Supply made directly to the Customer, or to a Principal?"
              },
              "isTravelAgent": {
                "type": "boolean",
                "example": true,
                "description": "Is the buyer a travel agent?"
              },
              "isAirline": {
                "type": "boolean",
                "example": true,
                "description": "Is the customer a airline that carries passengers or goods?"
              },
              "type": {
                "type": "string",
                "enum": [
                  "Taxable person",
                  "Non-taxable legal person",
                  "Private person",
                  "European Union body",
                  "Embassy",
                  "International body",
                  "NATO"
                ],
                "description": "What is the buyer type?"
              },
              "isVessel": {
                "type": "boolean",
                "example": true,
                "description": "Is the customer a vessel that carries passengers or goods?"
              },
              "localTaxId": {
                "type": "string",
                "description": ""
              },
              "city": {
                "type": "string",
                "description": ""
              },
              "vatIdCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "What is the country of the buyer's VAT ID?"
              },
              "vatGroupID": {
                "type": "string",
                "description": "What is the name of the VAT Group this company belongs to?"
              },
              "isRegisteredConsignee": {
                "type": "boolean",
                "example": true,
                "description": "Is the customer a registered consignee?"
              },
              "isHospital": {
                "type": "boolean",
                "example": true,
                "description": "Is the buyer a hospital?"
              },
              "countriesFixedEstablishment": {
                "type": "string",
                "description": "In which countries does the customer have a fixed establishment?"
              },
              "warehouseLicenceNumber": {
                "type": "string",
                "description": "Buyer's VAT / excise warehouse licence number"
              },
              "exportScheme": {
                "type": "boolean",
                "example": true,
                "description": "Is the buyer registered with the export scheme?"
              },
              "countriesExciseRegistration": {
                "type": "boolean",
                "example": true,
                "description": "In which countries does the customer have a VAT registration?"
              },
              "isCharity": {
                "type": "boolean",
                "example": true,
                "description": "Is the buyer a charity?"
              },
              "id": {
                "type": "string",
                "description": "What is the customer's company ID?"
              },
              "vatIdType": {
                "type": "string",
                "enum": [
                  "Fixed establishment",
                  "Fiscal representative",
                  "Direct",
                  "Main establishment"
                ],
                "description": "What type of VAT registration is it?"
              },
              "isTrader": {
                "type": "boolean",
                "example": true,
                "description": "Is the customer a trader of the item?"
              },
              "county": {
                "type": "string",
                "description": ""
              },
              "combinationGroupID": {
                "type": "string",
                "description": "What is the name of the combination group this company belongs to?"
              },
              "countriesImportDefermentLicence": {
                "type": "string",
                "description": "In which countries does the customer have a licence for import deferment?"
              }
            }
          },
          "date": {
            "type": "object",
            "properties": {
              "supplyDate": {
                "type": "string",
                "format": "date",
                "example": "2030-12-30",
                "description": "Date of supply of good or service?"
              },
              "dueDate": {
                "type": "boolean",
                "example": true,
                "description": ""
              },
              "docDate": {
                "type": "string",
                "format": "date",
                "example": "2030-12-30",
                "description": "What is the date of the document?"
              },
              "originalDocDate": {
                "type": "string",
                "format": "date",
                "example": "2030-12-30",
                "description": "Date of original invoice"
              },
              "paymentDate": {
                "type": "string",
                "format": "date",
                "example": "2030-12-30",
                "description": "What is the date of payment?"
              },
              "dateOfTransaction": {
                "type": "string",
                "format": "date",
                "example": "2030-12-30",
                "description": "What is the date of the transaction?"
              }
            }
          },
          "document": {
            "type": "object",
            "properties": {
              "discount": {
                "type": "number",
                "description": "Discount percentage?"
              },
              "currency3": {
                "type": "string",
                "description": ""
              },
              "docNumber": {
                "type": "string",
                "description": "What is the document number?"
              },
              "vatInclusiveOrExclusive": {
                "type": "string",
                "enum": [
                  "VAT inclusive",
                  "VAT exclusive"
                ],
                "description": "VAT inclusive / exclusive"
              },
              "currency4": {
                "type": "string",
                "description": ""
              },
              "documentStatus": {
                "type": "boolean",
                "example": true,
                "description": "Is this a cancelled document?"
              },
              "permitNumber": {
                "type": "string",
                "description": ""
              },
              "docType": {
                "type": "string",
                "enum": [
                  "Sales invoice",
                  "Sales credit",
                  "Purchase invoice",
                  "Purchase credit",
                  "Import document",
                  "Import corrective document",
                  "Self-bill sale",
                  "Self-bill sale credit",
                  "Self-bill purchase",
                  "Self-bill purchase credit",
                  "Sales transfer",
                  "Sales transfer credit",
                  "Purchase transfer",
                  "Purchase transfer credit",
                  "Sales order",
                  "Sales order credit",
                  "Purchase order",
                  "Purchase order credit",
                  "Self-supply sales document",
                  "Self-supply sales credit document",
                  "Self-supply purchase document",
                  "Self-supply purchase credit document",
                  "Debit note",
                  "Electronic administrative document"
                ],
                "description": "Type of document"
              },
              "atcud": {
                "type": "string",
                "description": "ATCUD number"
              },
              "exchangeRate": {
                "type": "number",
                "description": "What is the exchange rate?"
              },
              "currency2": {
                "type": "string",
                "description": ""
              },
              "originalDocNumber": {
                "type": "string",
                "description": "Number of original invoice"
              },
              "invoiceType": {
                "type": "string",
                "enum": [
                  "Full invoice",
                  "Simplified invoice",
                  "Receipt"
                ],
                "description": "Invoice type"
              },
              "quantity": {
                "type": "number",
                "description": "Quantity"
              },
              "currency": {
                "type": "string",
                "description": "What is the currency on the document?"
              },
              "lineNumber": {
                "type": "number",
                "description": "Line number on the document"
              }
            }
          },
          "itemProperties": {
            "type": "object",
            "properties": {
              "isMedicalCare": {
                "type": "boolean",
                "example": true,
                "description": "is MedicalCare?"
              },
              "isArticle59Service": {
                "type": "boolean",
                "example": true,
                "description": "is Article59Service?"
              },
              "isRestaurantOrCateringService": {
                "type": "boolean",
                "example": true,
                "description": "is RestaurantOrCateringService?"
              },
              "isOnboardShipAircraftTrain": {
                "type": "boolean",
                "example": true,
                "description": "on board ship, aircraft ot train?"
              },
              "isExciseGood": {
                "type": "boolean",
                "example": true,
                "description": "is ExciseGood?"
              },
              "isNewMeansOfTransport": {
                "type": "boolean",
                "example": true,
                "description": "is NewMeansOfTransport?"
              },
              "isValuationsOfAndWorkOnMoveableProperty": {
                "type": "boolean",
                "example": true,
                "description": "is ValuationsOfAndWorkOnMoveableProperty?"
              },
              "isDigitalService": {
                "type": "boolean",
                "example": true,
                "description": "is DigitalService?"
              },
              "isAncillaryServicesRelatingToCulturalArtisticSportingScientificEducationalEntertainmentFairsExhibitionsOrSimilarActivities": {
                "type": "boolean",
                "example": true,
                "description": "is AncillaryServicesRelatingToCulturalArtisticSportingScientificEducationalEntertainmentFairsExhibitionsOrSimilarActivities?"
              },
              "isPublicPostalService": {
                "type": "boolean",
                "example": true,
                "description": "is PublicPostalService?"
              },
              "isSecondHand": {
                "type": "boolean",
                "example": true,
                "description": "is second hand?"
              },
              "isSuppliedByIntermediary": {
                "type": "boolean",
                "example": true,
                "description": "is SuppliedByIntermediary?"
              },
              "isCapitalGood": {
                "type": "boolean",
                "example": true,
                "description": "is CapitalGood?"
              },
              "isMovableProperty": {
                "type": "boolean",
                "example": true,
                "description": "is MovableProperty?"
              },
              "isHireMeansOfTransport": {
                "type": "boolean",
                "example": true,
                "description": "is HireMeansOfTransport?"
              },
              "isTheSupplyOfStaffServices": {
                "type": "boolean",
                "example": true,
                "description": "is TheSupplyOfStaffServices?"
              },
              "isServicesConnectedWithImmovableProperty": {
                "type": "boolean",
                "example": true,
                "description": "is ServicesConnectedWithImmovableProperty?"
              },
              "isService": {
                "type": "boolean",
                "example": true,
                "description": "is Service?"
              },
              "isTransportationOfGoods": {
                "type": "boolean",
                "example": true,
                "description": "is TransportationOfGoods?"
              },
              "isInsuranceOrReinsurance": {
                "type": "boolean",
                "example": true,
                "description": "is InsuranceOrReinsurance?"
              },
              "isImmovableProperty": {
                "type": "boolean",
                "example": true,
                "description": "is ImmovableProperty?"
              },
              "isEducation": {
                "type": "boolean",
                "example": true,
                "description": "is Education?"
              },
              "isTransportationOfPersons": {
                "type": "boolean",
                "example": true,
                "description": "is TransportationOfPersons?"
              },
              "isAncillaryTransportServices": {
                "type": "boolean",
                "example": true,
                "description": "is AncillaryTransportServices?"
              },
              "isAdmission": {
                "type": "boolean",
                "example": true,
                "description": "is Admission?"
              },
              "isGasElectricityHeatingCooling": {
                "type": "boolean",
                "example": true,
                "description": "is GasElectricityHeatingCooling?"
              },
              "isGood": {
                "type": "boolean",
                "example": true,
                "description": "is Good?"
              },
              "isWelfareAndSocialSecurity": {
                "type": "boolean",
                "example": true,
                "description": "is WelfareAndSocialSecurity?"
              },
              "isGambling": {
                "type": "boolean",
                "example": true,
                "description": "is Gambling?"
              },
              "isAccommodation": {
                "type": "boolean",
                "example": true,
                "description": "is Accommodation?"
              },
              "isFinancialService": {
                "type": "boolean",
                "example": true,
                "description": "is FinancialService?"
              },
              "isEnergyGood": {
                "type": "boolean",
                "example": true,
                "description": ""
              }
            }
          },
          "thirdParties": {
            "type": "object",
            "properties": {
              "partyCIsVessel": {
                "type": "boolean",
                "example": true,
                "description": "Is the end customer a vessel?"
              },
              "partyAVatIdCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "VAT ID country of Party A"
              },
              "filingAgentIndividualTaxId": {
                "type": "string",
                "description": "Tax Id of the legal representative of the fiscal representative "
              },
              "filingAgentAddress": {
                "type": "string",
                "description": "Address of the agent/fiscal representative"
              },
              "filingAgentCompanyName": {
                "type": "string",
                "description": "Name of the agent/fiscal representative"
              },
              "partyCEstablishmentCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Establishment country of Party C"
              },
              "carrierRegisteredForSpecialArrangements": {
                "type": "boolean",
                "example": true,
                "description": "Is the carrier registered for Special Arrangements?"
              },
              "intermediaryRegisteredForIOSS": {
                "type": "boolean",
                "example": true,
                "description": "Is the intermediary registered for IOSS?"
              },
              "filingAgentContactName": {
                "type": "string",
                "description": "Contact name of the agent/fiscal representative"
              },
              "filingAgentVatId": {
                "type": "string",
                "description": "VAT Id of the agent/fiscal representative"
              },
              "mpRegisteredForOSS": {
                "type": "boolean",
                "example": true,
                "description": "Is the marketplace registered for OSS?"
              },
              "isMarketplace": {
                "type": "boolean",
                "example": true,
                "description": "From marketplace perspective?"
              },
              "partyAEstablishmentCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "Establishment country of Party A"
              },
              "mpRegisteredForIOSS": {
                "type": "boolean",
                "example": true,
                "description": "Is the marketplace registered for IOSS?"
              },
              "mpEstablishedCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "In which country is the marketplace established?"
              },
              "partyCVatIdCountry": {
                "type": "string",
                "minLength": 2,
                "maxLength": 2,
                "example": "GB",
                "description": "VAT ID country of Party C"
              }
            }
          },
          "eInvoice": {
            "type": "object",
            "properties": {
              "accountingCost": {
                "type": "string",
                "description": "A textual value that specifies where to book the relevant data into the Buyer's financial accounts"
              },
              "deliveryLocationSchemeId": {
                "type": "string",
                "enum": [
                  "0002",
                  "0003",
                  "0004",
                  "0005",
                  "0006",
                  "0007",
                  "0008",
                  "0009",
                  "0010",
                  "0011",
                  "0012",
                  "0013",
                  "0014",
                  "0015",
                  "0016",
                  "0017",
                  "0018",
                  "0019",
                  "0020",
                  "0021",
                  "0022",
                  "0023",
                  "0024",
                  "0025",
                  "0026",
                  "0027",
                  "0028",
                  "0029",
                  "0030",
                  "0031",
                  "0032",
                  "0033",
                  "0034",
                  "0035",
                  "0036",
                  "0037",
                  "0038",
                  "0039",
                  "0040",
                  "0041",
                  "0042",
                  "0043",
                  "0044",
                  "0045",
                  "0046",
                  "0047",
                  "0048",
                  "0049",
                  "0050",
                  "0051",
                  "0052",
                  "0053",
                  "0054",
                  "0055",
                  "0056",
                  "0057",
                  "0058",
                  "0059",
                  "0060",
                  "0061",
                  "0062",
                  "0063",
                  "0064",
                  "0065",
                  "0066",
                  "0067",
                  "0068",
                  "0069",
                  "0070",
                  "0071",
                  "0072",
                  "0073",
                  "0074",
                  "0075",
                  "0076",
                  "0077",
                  "0078",
                  "0079",
                  "0080",
                  "0081",
                  "0082",
                  "0083",
                  "0084",
                  "0085",
                  "0086",
                  "0087",
                  "0088",
                  "0089",
                  "0090",
                  "0091",
                  "0093",
                  "0094",
                  "0095",
                  "0096",
                  "0097",
                  "0098",
                  "0099",
                  "0100",
                  "0101",
                  "0102",
                  "0104",
                  "0105",
                  "0106",
                  "0107",
                  "0108",
                  "0109",
                  "0110",
                  "0111",
                  "0112",
                  "0113",
                  "0114",
                  "0115",
                  "0116",
                  "0117",
                  "0118",
                  "0119",
                  "0120",
                  "0121",
                  "0122",
                  "0123",
                  "0124",
                  "0125",
                  "0126",
                  "0127",
                  "0128",
                  "0129",
                  "0130",
                  "0131",
                  "0132",
                  "0133",
                  "0134",
                  "0135",
                  "0136",
                  "0137",
                  "0138",
                  "0139",
                  "0140",
                  "0141",
                  "0142",
                  "0143",
                  "0144",
                  "0145",
                  "0146",
                  "0147",
                  "0148",
                  "0149",
                  "0150",
                  "0151",
                  "0152",
                  "0153",
                  "0154",
                  "0155",
                  "0156",
                  "0157",
                  "0158",
                  "0159",
                  "0160",
                  "0161",
                  "0162",
                  "0163",
                  "0164",
                  "0165",
                  "0166",
                  "0167",
                  "0168",
                  "0169",
                  "0170",
                  "0171",
                  "0172",
                  "0173",
                  "0174",
                  "0175",
                  "0176",
                  "0177",
                  "0178",
                  "0179",
                  "0180",
                  "0183",
                  "0184",
                  "0185",
                  "0186",
                  "0187",
                  "0188",
                  "0189",
                  "0190",
                  "0191",
                  "0192",
                  "0193",
                  "0194",
                  "0195",
                  "0196",
                  "0197",
                  "0198",
                  "0199",
                  "0200",
                  "0201",
                  "0202",
                  "0203",
                  "0204",
                  "0205",
                  "0206",
                  "0207",
                  "0208",
                  "0209",
                  "0210",
                  "0211",
                  "0212",
                  "0213",
                  "0214",
                  "0215",
                  "0216",
                  "0217",
                  "0218",
                  "0219",
                  "0220",
                  "0221",
                  "0222",
                  "0223",
                  "0224",
                  "0225",
                  "0226",
                  "0227",
                  "0228",
                  "0229",
                  "0230"
                ],
                "description": ""
              },
              "allowanceOrChargeAmount": {
                "type": "boolean",
                "example": true,
                "description": ""
              },
              "sellerElectronicAddress": {
                "type": "string",
                "description": ""
              },
              "allowanceOrChargeReasonCode": {
                "type": "string",
                "enum": [
                  "41",
                  "42",
                  "60",
                  "62",
                  "63",
                  "64",
                  "65",
                  "66",
                  "67",
                  "68",
                  "70",
                  "71",
                  "88",
                  "95",
                  "100",
                  "102",
                  "103",
                  "104",
                  "105"
                ],
                "description": "The reason for the document level allowance or charge, expressed as text. The Document level allowance reason code and the Document level allowance reason shall indicate the same allowance reason"
              },
              "deliveryLocationId": {
                "type": "string",
                "description": "Peppol - An identifier for the location at which the goods and services are delivered."
              },
              "deliveryPartyName": {
                "type": "string",
                "description": "Delivery party name"
              },
              "buyerReference": {
                "type": "string",
                "description": ""
              },
              "buyerElectronicAddress": {
                "type": "string",
                "description": ""
              },
              "documentNote": {
                "type": "string",
                "description": ""
              }
            }
          },
          "accounting": {
            "type": "object",
            "properties": {
              "bookingAmountExlVAT": {
                "type": "number",
                "description": ""
              },
              "accountNumber": {
                "type": "string",
                "description": "GL account number"
              },
              "bookingDate": {
                "type": "string",
                "format": "date",
                "example": "2030-12-30",
                "description": ""
              },
              "bookingAmountVAT": {
                "type": "number",
                "description": ""
              },
              "bookingCurrency": {
                "type": "string",
                "description": ""
              }
            }
          }
        }
      },
      "authSchemaRequestBody": {
        "properties": {
          "apiKey": {
            "type": "string",
            "maxLength": 40,
            "example": "d9b97d76-5b6c-426f-9625-a1f63b7e195b",
            "minLength": 1,
            "description": "The API key issued by Tax Agile"
          },
          "accountId": {
            "minLength": 1,
            "maxLength": 100,
            "example": "1Qwj3WEgtaABCCkzgkAL",
            "description": "The account id issued by Tax Agile",
            "type": "string"
          }
        },
        "title": "Auth - Request",
        "description": "API authentication resource",
        "type": "object",
        "required": [
          "accountId",
          "apiKey"
        ],
        "additionalProperties": false
      },
      "companyUpdateSchema": {
        "type": "object",
        "description": "TODO - Out of date, needs copying from create schema",
        "required": [
          "_id",
          "contacts",
          "domains",
          "establishedCountry",
          "linkedCompanies",
          "locations",
          "name",
          "sampleCompany"
        ],
        "properties": {
          "_id": {
            "type": "string",
            "description": "Unique identifier for the company"
          },
          "booksClosingDay": {
            "type": "integer",
            "minimum": 1,
            "maximum": 31
          },
          "companyCode": {
            "type": "string",
            "description": "User-defined short code for the company"
          },
          "contacts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/companyContactRequest"
            }
          },
          "domains": {
            "type": "array",
            "items": {
              "oneOf": [
                {
                  "$ref": "#/components/schemas/companyVatDomainProperties"
                },
                {
                  "$ref": "#/components/schemas/companySalesTaxDomainProperties"
                }
              ]
            }
          },
          "entryDateTime": {
            "type": "string",
            "format": "date-time"
          },
          "establishedCountry": {
            "type": "string",
            "minLength": 2,
            "maxLength": 2,
            "description": "ISO 3166-1 alpha-2 country code",
            "example": "GB"
          },
          "financialYearStart": {
            "type": "string",
            "format": "date",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
            "example": "2026-01-01"
          },
          "lastUpdatedDateTime": {
            "type": "string",
            "format": "date-time"
          },
          "linkedCompanies": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/companyLink"
            }
          },
          "locations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/companyLocation"
            }
          },
          "name": {
            "type": "string",
            "description": "Company name"
          },
          "registrationNumber": {
            "type": "string",
            "description": "Company registration number"
          },
          "sampleCompany": {
            "type": "boolean",
            "description": "Flag indicating if this is a sample company"
          },
          "type": {
            "type": "string",
            "nullable": true,
            "enum": [
              "Taxable person",
              "Private individual",
              "Non-taxable legal person",
              "European Union body",
              "Embassy",
              "International body",
              "NATO"
            ]
          }
        }
      },
      "companyContactRequest": {
        "type": "object",
        "properties": {
          "description": {
            "description": "A description of the contact record for example: 'Local agent'.",
            "type": "string",
            "example": "Local agent"
          },
          "email": {
            "type": "string",
            "description": "Email address of contact.",
            "format": "string",
            "example": "user@localagent.com"
          },
          "name": {
            "type": "string",
            "description": "Contact's name",
            "example": "Harry Jones"
          },
          "phone": {
            "type": "string",
            "description":"Contact telephone number.",
            "example": "+44 7707 001 007"
          },
          "isDefault": {
            "type": "boolean",
            "description": "If setting >1 contact, then one must be designated as the default contact.",
            "example": true
          }
        }
      },
      "companyCreateRequestBody": {
        "title": "Company - Create request body",
        "type": "object",
        "description": "",
        "required": [
          "establishedCountry",
          "name",
          "type"
        ],
        "properties": {
          "booksClosingDay": {
            "type": "integer",
            "example": 0
          },
          "companyCode": {
            "type": "string",
            "description": "User defined short code for the company, not mandatory but recommended to include at creation. \n\n This code is used when loading transaction data for the company and when setting up tax codes.",
            "example": "ABC123"
          },
          "contacts": {
            "type": "array",
            "description": "A company can have contacts and for future use it supports setting up >1 contact, but in current implementation only 1 contact is used by the application. \n\nAn empty array `[]` is valid.\n\nIf creating the contact as part of the company creation request, then any or all fields may be provided.",
            "items": {
              "$ref": "#/components/schemas/companyContactRequest"
            }
          },
          "domains": {
            "type": "array",
            "description": "Tax domain specific attributes for the company, for example VAT Domain attributes. \n\nThis is the main object sub-structure of a Company, focussing on the VAT Domain, this is where `registrations` and `filings` are provisioned.\n\nAn empty array `[]` is valid. \n\n *Note: This object supports different data formats for different tax domains. The documentation states `oneOf` and lists both VAT and Sales Tax domains, but at time of publishing (Q1/2026) only VAT Domain is implemanted.*",
            "items": {
              "oneOf": [
                {
                  "$ref": "#/components/schemas/companyVatDomainProperties"
                },
                {
                  "$ref": "#/components/schemas/companySalesTaxDomainProperties"
                }
              ]
            }
          },
          "establishedCountry": {
            "type": "string",
            "minLength": 2,
            "maxLength": 2,
            "description": "Main establishment country using ISO 3166-1 alpha-2 country code format.",
            "example": "BE"
          },
          "financialYearStart": {
            "type": "string",
            "format": "date",
            "description": "Financial year start date in YYYY-MM-DD format.",
            "example": "2026-01-01"
          },
          "linkedCompanies": {
            "type": "array",
            "description": "Companies can be linked to other companies by defining parent-child relationships. \n\nThis can be where companyCode values are consolidated, or for VAT groups.",
            "items": {
              "$ref": "#/components/schemas/companyLink"
            }
          },
          "locations": {
            "type": "array",
            "description": "A company can have locations and for future use it supports setting up >1 location, but in current implementation only 1 location is used by the application. \n\nAn empty array `[]` is valid.",
            "items": {
              "$ref": "#/components/schemas/companyLocation"
            }
          },
          "name": {
            "type": "string",
            "description": "Company name. \n\nThis is presented in the UX as the full human readable name of the company.",
            "example": "ACME Packaging Europe GMBH"
          },
          "registrationNumber": {
            "type": "string",
            "description": "Company registration number.",
            "example": "1234567890"
          },
          "type": {
            "type": "string",
            "description": "Type of person. \n\nMust use one of the explicit string values listed in the enumeration list.",
            "enum": [
              "Taxable person",
              "Private individual",
              "Non-taxable legal person",
              "European Union body",
              "Embassy",
              "International body",
              "NATO"
            ],
            "example": "Taxable person"
          }
        }
      },
      "companyFilingsWorkflowActor": {
        "type": "object",
        "required": ["userUid"],
        "properties": {
          "isDefault": {
            "type": "boolean",
            "description": "Set to true.",
            "example": true
          },
          "userUid": {
            "type": "string",
            "description": "The internal User's unique ID, available on `GET /v0/user` (Note: /v0/user is not yet a published endpoint)."
          }
        }
      },
      "companyLink": {
        "type": "object",
        "description": "A relationship between companies.",
        "required": ["type", "children", "parents"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["vat-group", "consolidation"]
          },
          "children": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/companyLinkReference"
            }
          },
          "parents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/companyLinkReference"
            }
          },
          "scope": {
            "type": "object",
            "description": "Scope describes the relationship, and is used for VAT Groups where the `key` is `countryCode` and the `value` is the countryCode for example: `BE`.",
            "properties": {
              "key": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            }
          }
        }
      },
      "companyLinkReference": {
        "type": "object",
        "required": ["companyCode", "companyId"],
        "properties": {
          "companyCode": {
            "type": "string",
            "description": "User-facing company code"
          },
          "companyId": {
            "type": "string",
            "description": "Internal company ID"
          }
        }
      },
      "companyLocation": {
        "type": "object",
        "properties": {
          "line1": {
            "description": "First line of location address.",
            "type": "string",
            "example": "42 High Street."
          },
          "city": {
            "type": "string",
            "example": "London"
          },
          "county": {
            "type": "string",
            "example": "New county"
          },
          "country": {
            "type": "string",
            "description": "Country code using ISO 3166-1 alpha-2 country code format.",
            "minLength": 2,
            "maxLength": 2,
            "example": "GB"
          },
          "description": {
            "type": "string",
            "description": "A name of this location, e.g. Head office.",
            "example": "Head office"
          },
          "isDefault": {
            "type": "boolean",
            "example": true
          },
          "state": {
            "type": "string",
            "example": "State Abc"
          },
          "postalCode": {
            "type": "string",
            "description": "Post code or ZIP code of this location.",
            "example": "BN1 1AA"
          }
        }
      },
      "companySalesTaxDomainProperties": {
        "type": "object",
        "title": "Sales tax",
        "required": ["domainId", "nexus"],
        "properties": {
          "domainId": {
            "type": "string",
            "enum": ["sales-tax"]
          },
          "nexus": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/companySalesTaxNexusProperties"
            }
          },
          "registrations": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "registationId": {
                  "type": "string"
                },
                "filings": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      },
      "companySalesTaxNexusProperties": {
        "type": "object",
        "required": [
          "country",
          "hasLocalNexus",
          "hasPermanentEstablishment",
          "jurisCode",
          "jurisName",
          "jurisdictionTypeId",
          "localNexusTypeId",
          "nexusTaxTypeGroup",
          "nexusTypeId",
          "region",
          "validFrom"
        ],
        "properties": {
          "country": {
            "type": "string"
          },
          "hasLocalNexus": {
            "type": "boolean"
          },
          "hasPermanentEstablishment": {
            "type": "boolean"
          },
          "jurisCode": {
            "type": "string"
          },
          "jurisName": {
            "type": "string"
          },
          "jurisdictionTypeId": {
            "type": "string"
          },
          "localNexusTypeId": {
            "type": "string"
          },
          "nexusTaxTypeGroup": {
            "type": "string"
          },
          "nexusTypeId": {
            "type": "string"
          },
          "region": {
            "type": "string"
          },
          "validFrom": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "companyVatDomainProperties": {
        "type": "object",
        "title": "VAT",
        "description": "Properties of the company for VAT.",
        "required": ["domainId"],
        "properties": {
          "avalaraTaxCodesAllowed": {
            "type": "boolean",
            "description": "Recognize Avalara's generic tax codes?",
            "example": false,
            "default": false
          },
          "domainId": {
            "type": "string",
            "description": "Literal string identifying the type of domain record, for VAT it must be set to `vat`.",
            "enum": ["vat"],
            "example": "vat"
          },
          "isAirline": {
            "type": "boolean",
            "description": "Is the company an airline?",
            "default": false,
            "example": false
          },
          "isCharity": {
            "type": "boolean",
            "description": "Is the company a charity?",
            "default": false,
            "example": false
          },
          "isGasElecTaxableDealer": {
            "type": "boolean",
            "description": "Is the company a gas or electricity dealer?",
            "default": false,
            "example": false
          },
          "isGovernment": {
            "type": "boolean",
            "description": "Is the company a Government?",
            "default": false,
            "example": false
          },
          "isHospital": {
            "type": "boolean",
            "description": "Is the company a hospital?",
            "default": false,
            "example": false
          },
          "isMarketplace": {
            "type": "boolean",
            "description": "Is the company a marketplace?",
            "default": false,
            "example": false
          },
          "isTrader": {
            "type": "boolean",
            "description": "Is the company a trader?",
            "default": false,
            "example": false
          },
          "isTravelAgent": {
            "type": "boolean",
            "description": "Is the company a travel agent?",
            "default": false,
            "example": false
          },
          "isVessel": {
            "type": "boolean",
            "description": "Is the company a vessel?",
            "default": false,
            "example": false
          },
          "mpEstablishedCountry": {
            "type": "string",
            "description": "Marketplace established country using ISO 3166-1 alpha-2 country code.",
            "minLength": 2,
            "maxLength": 2,
            "example": "NL"
          },
          "mpRegisteredForIOSS": {
            "type": "boolean",
            "description": "Marketplace registered for IOSS? \n\nOnly needs to be provided if company is a marketplace.",
            "example": false
          },
          "mpRegisteredForOSS": {
            "type": "boolean",
            "description": "Marketplace registered for OSS? \n\nOnly needs to be provided if company is a marketplace.",
            "example": false
          },
          "registrations": {
            "type": "array",
            "description": "VAT Registrations setup as part of this company.",
            "items": {
              "$ref": "#/components/schemas/companyVatRegistration"
            }
          },
          "reportSalesAlsoOnPurchaseSide": {
            "type": "boolean",
            "description": "Report sales also on purchase side?",
            "example": false,
            "default": false
          },
          "signConvention": {
            "type": "string",
            "description": "Set handling of incoming data signing (positive/negative).",
            "enum": ["", "allPos", "sap"],
            "example": "allPos", 
            "default": ""
          }
        }
      },
      "companyVatFilingsSettings": {
        "type": "object",
        "description": "An active Filing for example a VAT Return. \n\nIn order to populate some attributes in this record, first used the `GET /filer/vat/filings/` endpoint to learn the capabilities on the platform. \n\nConsider using the query parameter to filter by the country/filing you are looking to setup `GET /filer/vat/filings?countryCode=BE&category=vat-return`.",
        "required": ["country", "filingId", "frequency"],
        "properties": {
          "country": {
            "type": "string",
            "description": "Two digit country code (ISO 3166-1 alpha-2)",
            "minLength": 2,
            "maxLength": 2
          },
          "deadlineExtendedByDays": {
            "type": "integer",
            "description": "The number of days to move the deadline for this filing.\n\nIt can be a positive or negative number, to bring the due date earlier (negative) or later (positive).",
            "example": 0,
            "default": 0
          },
          "deadlineExtendedByMonths": {
            "type": "integer",
            "description": "The number of months to move the deadline for this filing.\n\nIt can be a positive or negative number, to bring the due date earlier (negative) or later (positive).",
            "example": 0,
            "default": 0
          },
          "filingId": {
            "type": "string",
            "description": "This is an ID of the filing within the platform; to find the values use the endpoint `GET /filer/vat/filings` which also accepts query parameters of `countryCode` and `category`.\n\nFor example: `GET /filer/vat/filings?countryCode=BE&category=vat-return`.",
            "example": "1CbBkT8GufLXR7QyM2eB"
          },
          "frequency": {
            "type": "string",
            "description": "Period type reference, each filing has a set of valid values which can be used.\n\nFirst fetch capabilities using `GET /filer/vat/filings` to get the valid values for the frequency field.",
            "example": "quarter"
          },
          "name": {
            "type": "string",
            "description": "The name of the filing, as returned by the capabilities endpoint: `GET /filer/vat/filings`.",
            "example": "VAT Return (U 30)"
          },
          "taskSettings": {
            "type": "object",
            "description": "Control whether Tasks are created for the Filing Preparer.\n\nObject is optional.\n\nFunctionality not fully implemented.",
            "properties": {
              "createPreparerTask": {
                "type": "boolean",
                "description": "Enable or disable the generation of tasks for the Preparer of this filing.",
                "example": true
              },
              "preparerTaskDaysBefore": {
                "type": "integer",
                "description": "Set the number of days before the filing deadline, when the preparer should be sent the Task.",
                "example": 35
              }
            }
          },
          "preparers": {
            "type": "array",
            "description": "The user assigned to prepare the filing. \n\nNot required. \n\nThe data structure is supporting future capabilities of allowing more than 1 person in this role; but currently the platform only supports 1 person.",
            "items": {
              "$ref": "#/components/schemas/companyFilingsWorkflowActor"
            }
          },
          "reviewers": {
            "type": "array",
            "description": "The user assigned to review the filing. \n\nNot required. \n\nThe data structure is supporting future capabilities of allowing more than 1 person in this role; but currently the platform only supports 1 person.",
            "items": {
              "$ref": "#/components/schemas/companyFilingsWorkflowActor"
            }
          },
          "submitters": {
            "type": "array",
            "description": "The user assigned to submit the filing. \n\nNot required. \n\nThe data structure is supporting future capabilities of allowing more than 1 person in this role; but currently the platform only supports 1 person.",
            "items": {
              "$ref": "#/components/schemas/companyFilingsWorkflowActor"
            }
          }
        }
      },
      "companyVatRegistration": {
        "type": "object",
        "description": "VAT Registrations for this company.",
        "required": ["country", "registrationId", "vatRegistrationType"],
        "properties": {
          "country": {
            "type": "string",
            "description": "Two digit country code (ISO 3166-1 alpha-2)",
            "minLength": 2,
            "maxLength": 2,
            "example": "BE"
          },
          "distanceSales": {
            "type": "boolean",
            "description": "Distance sales.",
            "example": false
          },
          "exportScheme": {
            "type": "boolean",
            "description": "Export scheme.",
            "example": false
          },
          "filings": {
            "type": "array",
            "description": "Filings setup for this country. \n\nCan be an empty array `[]`.",
            "items": {
              "$ref": "#/components/schemas/companyVatFilingsSettings"
            }
          },
          "fixedRate": {
            "type": "string",
            "description": "Fixed rate as a string.",
            "example": "16.5"
          },
          "importLicence": {
            "type": "boolean",
            "description": "Import licence.",
            "example": false
          },
          "IOSS": {
            "type": "string",
            "description": "IOSS Number.",
            "example": "IM1234567890"
          },
          "isRegisteredForToms": {
            "type": "boolean",
            "description": "Tour Operators Margin Scheme.",
            "example": false
          },
          "localTaxNumber": {
            "type": "string",
            "description": "Local tax number.",
            "example": "123456789"
          },
          "methodRecovery": {
            "type": "string",
            "description": "Method of recovery.",
            "enum": ["standard", "special"],
            "example": "standard",
            "default": ""
          },
          "nonUnionOSS": {
            "type": "string",
            "description": "Non-union OSS number.",
            "example": "NU123456789"
          },
          "registrationId": {
            "type": "string",
            "description": "VAT Registration ID - without a leading country code.", 
            "example": "1234567890"
          },
          "typeOfVatPayer": {
            "type": "string",
            "description": "Type of VAT payer",
            "enum": ["full", "exempt", "mixed"],
            "example": "",
            "default": ""
          },
          "unionOSS": {
            "type": "string",
            "description": "Union OSS number.",
            "example": "EU123456789"
          },
          "vatRegistrationType": {
            "type": "string",
            "description": "Type or registration.",
            "enum": [
              "mainEstablishment",
              "fixedEstablishment",
              "direct",
              "fiscalRepresentative"
            ],
            "example": "mainEstablishment"
          },
          "warehouseLicenceNumber": {
            "type": "string",
            "description": "VAT warehouse licence number.",
            "example": "GBWH123456789000"
          }
        }
      },
      "getCompaniesResponse200": {
        "type": "object",
        "properties": {
          "count": {
            "type": "integer",
            "description": "Total number of companies matching the query"
          },
          "data": {
            "type": "array",
            "description": "TODO - schema is wrong!",
            "items": {
              "$ref": "#/components/schemas/companyUpdateSchema"
            }
          },
          "page": {
            "type": "string",
            "description": "Current page number"
          },
          "pageSize": {
            "type": "string",
            "description": "Number of items per page"
          }
        }
      },
      "longRunningAccepted202": {
        "title": "Operation Accepted",
        "type": "object",
        "properties": {
          "_id": {
            "description": "Unique operation id",
            "type": "string", 
            "example": "ceb50cb0-0135-4fdf-bcd3-dbfc9d4d9adc"
          },
          "href": {
            "description": "Location to poll for operation status",
            "type": "string",
            "example": "/v1/operations/ceb50cb0-0135-4fdf-bcd3-dbfc9d4d9adc"
          }
        }
      },
      "operationsResponse200": {
        "title": "Operation Poll",
        "type": "object",
        "properties": {
          "_id": {
            "description": "Unique operation id",
            "type": "string", 
            "example": "7942cf02-2067-4b37-8e00-e3bd3926d6"
          },
          "status": {
            "description": "Operation status",
            "type": "string",
            "example": "Pending | Inprogress"
          },
          "href": {
            "description": "Location to poll for operation status",
            "type": "string",
            "example": "/v1/operations/7942cf02-2067-4b37-8e00-e3bd3926d6"
          }
        }
      },
      "operationsResponse303": {
        "title": "Operation Complete",
        "type": "object",
        "properties": {
          "_id": {
            "description": "Unique operation id",
            "type": "string", 
            "example": "7942cf02-2067-4b37-8e00-e3bd3926d6"
          },
          "status": {
            "description": "Operation status",
            "type":"string",
            "example": "Complete"
          },
          "href": {
            "description": "Resource uri",
            "type": "string",
            "example": "/v1/auditor/vat/audits/6gmTpTAM3xC7m3v66xB8"
          }
        }
      },
      "vatAuditSummaryResponse": {
        "title": "VAT Audit Summary",
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "i1yKcOrT2Rv9neYsKwvG"
          },
          "entryDateTime": {
            "type": "string",
            "example": "2023-05-18T09:45:57.204Z"
          },
          "summary": {
            "type": "object",
            "properties": {
              "auditMetrics": {
                "type": "object",
                "properties": {
                  "totalQualityOk": {
                    "type": "integer",
                    "description": "Count of transactions which could be audited",
                    "example": 20
                  },
                  "totalAccurate": {
                    "type": "integer",
                    "description": "Count of transactions with no problems found",
                    "example": 13
                  },
                  "totalExposure": {
                    "type": "integer",
                    "example": 4770
                  }
                }
              },
              "dataSummary": {
                "type": "array",
                "description": "Array of data quality issues in audit",
                "items":{
                  "type": "object",
                  "properties": {
                    "message": {
                      "description": "Description of problem",
                      "type": "string",
                      "example": "A blank value is not a correct value for \"buyer.VatIdCountry\". Check the mapping."
                    }, 
                    "count": {
                      "description": "Count of transactions with this error",
                      "type": "integer",
                      "example": 1
                    }
                  }
                }
              },
              "errors": {
                "type": "array",
                "description": "Summary of all errors in the audit",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "checkVatAmountDifference",
                      "description": "Unique id of the audit error"
                    }, 
                    "name": {
                      "type": "string",
                      "example": "VAT amount",
                      "description": "Label text for this error check"
                    },
                    "count": {
                      "type": "integer",
                      "example": 6,
                      "description": "Count of occurances of this error in audit"
                    }
                  }
                }
              },
              "totalDocuments": {
                "type": "integer",
                "example": 25,
                "description": "Total number of documents in the audit"
              }
            }
          },
          "dataDetails": {
            "type": "object",
            "properties": {
              "createdBy": {
                "type": "string",
                "example": "api"
              },
              "dataSourceName": {
                "type": "string",
                "example": "2023-05-18T09:45:55.923Z.json"
              }
            }
          },
          "options": {
            "type": "object",
            "properties": {
              "doTaxCodeMapping": {
                "type": "boolean",
                "example": "false"
              }
            }
          },
          "results": {
            "type": "object",
            "properties": {
              "href": {
                "type": "string",
                "example": "/v0/auditor/vat/audits/i1yKcOrT2Rv9neYsKwvG/results"
              }
            }
          }
        }
      },
      "vatAuditResultsResponse": {
        "title": "VAT Audit Results",
        "type": "object",
        "properties": {
          "transactions": {
            "type": "array",
            "items":{
              "type": "object",
              "properties": {
                "_id": {
                  "type": "string",
                  "example": "1a1da4fa-270c-4aae-bf4d-5b7af11b693d"
                },
                "docNumber": {
                  "type": "string",
                  "example": "BE 102202"
                }, 
                "docDate": {
                  "type": "string",
                  "example": "2023-02-05"
                },
                "auditResult":{
                  "type": "object",
                  "properties": {
                    "errors":{
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "checkVatAmountDifference",
                            "description": "Name of the error"
                          },
                          "message": {
                            "type": "string",
                            "example": "VAT amount in data (630.00) does not match the value Auditor calculated (0.00)"
                          },
                          "exposure": {
                            "type": "number",
                            "example": 400
                          },
                          "type": {
                            "type": "string",
                            "example": "engineCheck",
                            "description": "Identifies the error as engineCheck, requiredData, conditionCheck or unhandledException"
                          }
                        }
                      }
                    },
                    "done": {
                      "type": "boolean"
                    },
                    "parties": {
                      "type": "object",
                      "description": "Indentifies who was the company and counterparty for the transaction based on document type",
                      "properties": {
                        "company" : {
                          "type": "string",
                          "example": "seller",
                          "description": "seller or buyer"
                        },
                        "companyName": {
                          "type": "string",
                          "example": "VAT Calc Demo Co BVBA"
                        }, 
                        "counterparty": {
                          "type": "string",
                          "example": "buyer",
                          "description": "seller or buyer"
                        },
                        "counterpartyName": {
                          "type": "string",
                          "example": "BE Company Customer Ltd"
                        }
                      }
                    },
                    "hasErrors": {
                      "type": "boolean",
                      "description": "Flag whether there are errors in this transaction",
                      "example": true
                    },
                    "exposure": {
                      "type": "integer",
                                           "example": 630
                    }
                  }
                },
                "analysisResult": {
                    "$ref": "#/components/schemas/determinationVatResponse200"
                }
              }
            }
          },
          "count": {
            "type": "object",
            "properties": {
              "totalInAudit": {
                "type": "integer",
                "description": "Total number of transactions in the audit batch",
                "example": 30
              },
              "showing": {
                "type": "integer",
                "example": 20,
                "description": "Number of transactions shown in this response"
              }
            }
          },
          "next": {
            "type": "object",
            "description": "Object to assist in fetching the next page of results",
            "properties": {
              "pageSize": {
                "type": "integer",
                "example": 20
              },
              "href": {
                "type": "string",
                "example": "/v1/auditor/vat/audits/vJDk97ZoLnUuc1aoJXSM/results?startAfter=b5e9282e-8a40-4462-81c3-2ab28b904f57&pageSize=20",
                "description": "Reference to the first page of results"
              }
            }
          },
          "first": {
            "type": "object",
            "description": "Object to assist in fetching the first page of results",
            "properties": {
              "href": {
                "type": "string",
                "example": "/v1/auditor/vat/audits/vJDk97ZoLnUuc1aoJXSM/results?pageSize=20",
                "description": "Reference to the first page of results"
              }
            }
          }
        }
      },
      "vatAuditResultsErrorListResponse": {
        "title": "VAT Audit Results - Error list",
        "type": "object",
        "properties": {
          "transactions": {
            "type": "array",
            "items":{
              "type": "object",
              "properties": {
                "docNumber": {
                  "type": "string",
                  "example": "BE 102202"
                }, 
                "docDate": {
                  "type": "string",
                  "example": "2023-02-05"
                },
                "errorId": {
                  "type": "string",
                  "example": "checkVatIdCountry"
                },
                "errorType": {
                  "type": "string",
                  "example": "engineCheck"
                },
                "errorMessage": {
                  "type": "string",
                  "example": "VAT amount in data (0.00) does not match the value Auditor calculated (400.00)"
                }, 
                "exposure": {
                  "type": "number",
                  "example": 400
                },
                "type": {
                  "type": "string",
                  "example": "Domestic"
                },
                "transaction": {
                  "type": "string",
                  "example": "Supply of goods and services"
                }, 
                "placeOfSupply": {
                  "type": "string",
                  "example": "BE"
                },
                "exemption": {
                  "type": "string",
                  "example": "Waste and scrap"
                }, 
                "obligationToPay": {
                  "type": "string",
                  "example": "Customer"
                }, 
                "company": {
                  "type": "string",
                  "example": "VAT Calc Demo Co BVBA"
                }, 
                "counterparty": {
                  "type": "string",
                  "example": "CH Company GmbH"
                }
              }
            }
          }
        }
      },
      "summaryTransactionResponse": {
        "title": "VAT Determination Summary",
        "type": "object",
        "properties": {
          "request": {
            "$ref": "#/components/schemas/determinationVatRequestBody"
          },
          "response": {
            "$ref": "#/components/schemas/determinationVatResponse200"
          },
          "entryDateTime": {
            "description": "Datetime the transaction was created on our platform",
            "type": "string",
            "example": "2022-06-28T14:12:35.000Z"
          },
          "_id": {
            "description": "Unique id issued by our platform for this transaction",
            "type": "string",
            "example": "7942cf02-2067-4b37-8e00-e3bd3926d6e5"
          },
          "source": {
            "description": "Entry point source on the platform",
            "type": "string",
            "example": "calculator-api"
          }
        }
      },
      "detailTransactionResponse": {
        "title": "VAT Determination Detail",
        "type": "object",
        "properties": {
          "entryDateTime": {
            "description": "Datetime the transaction was created on our platform",
            "type": "string",
            "example": "2022-06-28T14:12:35.000Z"
          },
          "_id": {
            "description": "Unique id issued by our platform for this transaction",
            "type": "string",
            "example": "7942cf02-2067-4b37-8e00-e3bd3926d6e5"
          },
          "source": {
            "description": "Entry point source on the platform",
            "type": "string",
            "example": "calculator-api"
          },
          "determinationData": {
            "type": "object",
            "description": "Detailed insights into the transactions determination",
            "properties": {
              "calcBuffer": {
                "type": "object"
              },
              "analysisResult": {
                "type": "object"
              },
              "auditResult": {
                "type": "object"
              }
            }
          },
          "transactionData": {
            "type": "object",
            "description": "Attributes of the transaction"
          },
          "apiRequestData": {
            "type": "object",
            "description": "If the transaction was loaded via API this will contain the request and response",
            "properties": {
              "request": {
                "$ref": "#/components/schemas/determinationVatRequestBody"
              },
              "response": {
                "$ref": "#/components/schemas/determinationVatResponse200"
              }
            }
          }
        }
      },
      "determinationVatResponse200": {
        "title": "VAT Determination - Response",
        "description": "",
        "properties": {
          "transaction1": {
            "type": "string",
            "title": "Transaction 1",
            "example": "Supply of goods - BE - Intra-Community supply - N/A - 0 - 0 - 0"
          },
          "transaction2": {
            "type": "string",
            "example": "N/A - N/A - No exemption - N/A",
            "title": "Transaction 2"
          },
          "rateT1": {
            "type": "number",
            "example": 0,
            "title": "Rate T1"
          },
          "reversedOutputVat": {
            "title": "Reversed output VAT",
            "example": 0,
            "type": "number"
          },
          "reversedOutputVatRate": {
            "type": "number",
            "title": "Reversed output VAT rate",
            "example": 0
          },
          "deductibleInputVat": {
            "example": 0,
            "title": "Deductible input VAT",
            "type": "number"
          },
          "invoiceMentioning": {
            "example": "Article 138(1) Directive 2006/112 EC",
            "type": "string",
            "title": "Invoice mentioning"
          },
          "invoiceMentioningEu": {
            "example": "Article 138(1) Council Directive 2006/112 EC",
            "type": "string",
            "title": "Invoice mentioning EU"
          },
          "taxableTransactionT1": {
            "example": "Supply of goods",
            "type": "string",
            "title": "Taxable transaction"
          },
          "transType": {
            "example": "Intra-Community supply",
            "type": "string",
            "title": "Transaction type"
          },
          "posT1": {
            "example": "BE",
            "type": "string",
            "title": "Place of supply"
          },
          "exemptionDescriptionT1": {
            "example": "Intra-Community supply",
            "type": "string",
            "title": "Exemption description"
          },
          "obligationToPayT1": {
            "example": "N/A",
            "type": "string",
            "title": "Obligation to pay"
          },      
          "taxPoint": {
            "type": "string",
            "example": "2025-05-09T00:00:00.000Z",
            "title": "Tax point"
          },
          "deductibleRate": {
            "type": "number",
            "title": "Deductible rate",
            "example": 0
          },
          "sellerVatNo": {
            "type": "string",
            "title": "Seller VAT number country",
            "example": "BE"
          },
          "buyerVatNo": {
            "example": "DE",
            "type": "string",
            "title": "Buyer VAT number country"
          },
          "baseAmount": {
            "type": "number",
            "example": 100,
            "title": "Base amount"
          },
          "vatAmount": {
            "type": "number",
            "title": "VAT amount",
            "example": 0
          },
          "importVatAmount": {
            "type": "number",
            "title": "Import VAT amount",
            "example": 0
          },
          "vatCode": {
            "example": "BESICSG000",
            "type": "string",
            "title": "VAT code"
          },
          "taxCode": {
            "title": "Tax code",
            "type": "string",
            "example": ["A3", "IC0", "B0"],
            "description": "Only returned when the request uses the useTaxCodes=true query parameter"
          },
          "peppolVatexCode": {
            "title": "Peppol tax code",
            "type": "string",
            "description": "Tax code for exempt and reverse charge transactions per Peppol specification",
            "example": "VATEX-EU-79-C"
          },
          "peppolTaxCategoryId": {
            "title": "Peppol tax code category",
            "type": "string",
            "description": "Tax category ID to define the VAT treatment per Peppol specification",
            "example": "K"
          },
          "calculatedRate": {
            "type": "number",
            "title": "Calculated rate",
            "example": 0
          },
          "uuid": {
            "type": "string",
            "title":"Unique id of transaction",
            "example": "fea0f7da-074e-47e9-8bde-51b8b5f778da"
          },
          "vatBoxes": {
            "title": "VAT box reporting",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "country": {
                  "title": "Reporting country",
                  "type": "string",
                  "example": "BE"
                },
                "box": {
                  "title": "Box name",
                  "example": "01",
                  "type": "string"
                },
                "value": {
                  "type": "number",
                  "example": 0,
                  "title": "Box value"
                }
              },
              "title": "Items"
            }
          },
          "provisions": {
            "title": "Provisions",
            "description": "Legal provisions for the various categories of VAT, such as place of supply, exemption, etc.",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "category": {
                  "title": "Provision category name",
                  "type": "string",
                  "example": "Taxable_persons"
                },
                "text": {
                  "title": "Provision name",
                  "type": "string",
                  "example": "Article_9_1"
                }
              }
            }
          }
        },
        "type": "object"
      },
      "determinationVatRequestBody": {
        "$ref": "./schemas/vatDeterminationRequestBodySchema.json"
      },
      "vatUploadOptions": {
          "title": "VAT Upload - Options",
          "type": "object",
          "required": [ "mappingId" ],
          "properties": {
            "mappingId": {
              "type": "string",
              "example": "CTDCqBkBozNOQe1NFoaa",
              "description": "Provide the id of the data mapping to use with the payload",
              "default": "default"
            },
            "sendToFiler": {
              "type": "boolean",
              "default": false,
              "description": "Set this to add Filer to the data pipeline for this upload"
            },
            "sendToAuditor": {
              "type": "boolean",
              "default": false,
              "description": "Set this to add Auditor to the data pipeline for this upload. \n\n This defaults to true when using POST to /vat/audits."
            },
            "doTaxCodeMapping": {
              "type": "boolean",
              "default": false,
              "description": "If set, this will use Tax codes to enrich the data uploaded"
            },
            "renameFileIfDuplicate": {
              "type": "boolean",
              "default": false,
              "description": "Set this to allow a duplicate file to be uploaded. \n\n The filename will be made unique by the upload process."
            }
          }
      },
      "vatUploadRequestBody": {
        "title": "VAT Upload - Request",
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/vatDataModelSchema"
              }   
          },
          "options": {
            "$ref": "#/components/schemas/vatUploadOptions"
          }
        }
      },
      "vatUploadSummaryListResponse": {
        "title":"VAT Upload - Summary data",
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "4e9a3622-c743-46e7-8bb0-f4fa51795164"
          },
          "entryDateTime": {
            "type": "string",
            "example": "2024-08-02T13:38:50.759Z"
          },
          "name": {
            "type": "string",
            "example": "Gen template test file.xlsx"
          },
          "totalDocuments": {
            "type": "number",
            "example": 10
          },
          "mappingName": {
            "type": "string",
            "example": "Tax Agile Test Mapping"
          },
          "dataSource": {
            "type": "string",
            "example": "api"
          },
          "status": {
            "type": "string",
            "example": "Complete"
          },
          "options": {
            "type": "object",  
            "$ref": "#/components/schemas/vatUploadOptions"
          },
          "resource": {
            "type": "object",
            "properties": {
              "href": {
                "type": "string",
                "example": "/v1/datamanager/vat/uploads/4e9a3622-c743-46e7-8bb0-f4fa51795164"
              }
            }
          }
        }
      },
      "vatUploadsDetailResponse": {
        "title": "VAT Upload - Detail data",
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "example": "4e9a3622-c743-46e7-8bb0-f4fa51795164"
          },
          "status": {
            "type": "string",
            "example": "Complete"
          },
          "uploadDetails": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "The name of the upload as stored on the platform",
                "example": "2024-08-05T14:48:20.000Z.json"
              }, 
              "totalDocuments": {
                "type": "number",
                "example": 10,
                "description": "The count of documents contained in this upload"
              },
              "entryDateTime": {
                "type": "string",
                "description": "Datetime the uploaded entered our platform",
                "example": "2024-08-05T14:48:20.000Z"
              }, 
              "endDateTime": {
                "type": "string",
                "description": "Datetime the uploaded completed processing",
                "example": "2024-08-05T14:49:40.000Z"
              }, 
              "mappingName": {
                "type": "string",
                "description": "The name the user would recognise for the data mapping used.",
                "example": "Tax Agile Filer Mapping"
              }, 
              "dataSource": {
                "type": "string",
                "description": "Returns either 'api' or a string for a UI uploaded by statement.",
                "example": "Uploaded in the UI by andy.lee@taxagile.io"
              }
            }
          },
          "options": {
            "$ref": "#/components/schemas/vatUploadOptions"
          },
          "progress": {
            "type": "object",
            "properties": {
              "auditorTasksProgress": {
                "type": "number",
                "description": "Range from 0 to 100 to indicate progress of the upload in VAT Auditor",
                "example": 100
              },
              "filerTasksProgress": {
                "type": "number",
                "description": "Range from 0 to 100 to indicate progress of the upload in VAT Filer",
                "example": 100
              },
              "progress": {
                "type": "number",
                "description": "Range from 0 to 100 which represents an overall progress including VAT Filer and VAT Auditor (if used).",
                "example": 100

              }, 
              "disableDelete": {
                "type": "boolean",
                "description": "When returning true, a delete should not be offered to any user as the upload has not yet completed an operation.",
                "example": true
              }
              
            }
          }
        }

      }
    },
    "requestBodies": {},
    "responses": {
      "error401": {
        "description": "Unauthorized - invalid token",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/errorResponse"
            },
            "example": {
              "errorCode": "AU001",
              "message": "Unauthorized"
            }
          }
        }
      },
      "error404": {
        "description": "Not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/errorResponse"
            },
            "example": {
              "errorCode": "QY001",
              "message": "Not found"
            }
          }
        }
      }
    }
  }
}
